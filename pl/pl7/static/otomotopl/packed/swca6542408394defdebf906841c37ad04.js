ValidatorsClass=BaseClass.extend({initValidators:function(params){var thiz=this;if(this.$form){var defaultParams={ignore:'.do-not-validate',rules:{'data[title]':{required:false,maxlength:70,minlength:0,noemail:true,nowww:true,nophone:true,seekingintitle:true,nocapslock:true},'data[description]':{required:true,maxlength:4096,minlength:30,noemail:true,nophone:false,nocapslock:true},'data[region_id]':{required:true},'data[subregion_id]':{required:true},'data[person]':{required:true,maxlength:100,minlength:1,noemail:true,nowww:true,nophone:true,person:false,nocapslock:false},'data[email]':{required:{depends:function(e){return true}},email:true,maxlength:254,contactform:true},'data[sms_phone]':{required:{depends:function(e){return false}},cellphone:true},'data[accept]':{required:true},'data[private_business]':{required:function(e){return($('#private-business-div:visible').size()+$('#param-private_business:visible').size())>0}},'data[offer_seek]':{required:true},'data[category_id]':{required:true},'data[map_address]':{noemail:true,nowww:true,nophone:true,maxlength:50},'data[phone]':{noemail:true,nowww:true,phone:true,maxlength:50},'data[skype]':{required:{depends:function(e){return $(e).val().length>0}},nowww:true,skype:true,maxlength:32,minlength:5},'data[gg]':{noemail:true,nowww:true,minlength:3,maxlength:10,yahooid:true,notstartingwithzero:true},'data[comunicator]':{noemail:true,nowww:true,minlength:3},'data[promocode]':{equals:["","botosani","bistrita","monalisa","madalina","andra","natalia","mirela","alexandra","monica","manuela","ilinca","liliana","ariana","iuliana","teodora","andrea","mara","supermamica10","supermamica11","supermamica12","supermamica13","supermamica14","supermamica15","supermamica16","supermamica17","supermamica18","supermamica19","supermamica20","supermamica21","supermamica22","supermamica23","supermamica24","supermamica25","supermamica26","supermamica27","supermamica28","supermamica29","supermamica30","supermamica31","supermamica32","supermamica33","supermamica34","supermamica35","supermamica36","supermamica37","supermamica38","supermamica39","supermamica40","concurs"]},'data[sms_number]':{digits:true,minlength:10,maxlength:function(e){var val=$('#add-smsnumber').val();if(val&&val[0]==0){return 13}else return 12},notstartingwithzero:false},'data[param_vin]':{vin:sitecode=='otomotopl'||sitecode=='autovitro'}},messages:{'data[title]':{required:'Musisz podać tytuł',maxlength:'Tytuł nie może być dłuższy niż {0} znaków',minlength:'Tytuł powinien zawierać co najmniej 5 znaków'},'data[description]':{required:'Musisz podać opis',maxlength:'Opis nie może być dłuższy niż {0} znaków',minlength:'Opis musi być dłuższy niż {0} znaków'},'data[phone]':{maxlength:'Nie może być dłuższe niż {0} znaków'},'data[person]':{required:'Musisz podać imię',maxlength:'Nie może być dłuższe niż {0} znaków',minlength:'Nie może być krótsze niż {0} znaków'},'data[sms_phone]':{required:'You must provide a phone number'},'data[email]':{required:'Musisz podać e-mail',email:'Niepoprawny adres e-mail'},'data[accept]':{required:'Musisz najpierw zaakceptować regulamin'},'data[private_business]':{required:'Musisz podać typ sprzedającego'},'data[region_id]':{required:'Musisz podać lokalizację'},'data[subregion_id]':{required:'Musisz podać lokalizację'},'data[category_id]':{required:'Wybierz kategorię'},'data[offer_seek]':{required:'Wybierz typ oferty'},'data[gg]':{minlength:'Nie może być krótsze niż {0} znaków',maxlength:'Nie może być dłuższe niż {0} znaków',notstartingwithzero:'Proszę podać poprawny numer'},'data[sms_number]':{digits:'Proszę podać same cyfry.'},'data[confirm_type]':{required:'Please choose account type'},'data[param_vin]':{vin:'Niepoprawny numer VIN'}}};params=$.extend(true,{},defaultParams,params||{});var validator=this.$form.validate(params);if(validator.showErrorsFromAction)validator.showErrorsFromAction()}}});$.validator.addMethod("pattern",function(value,element,param){if(!(param instanceof RegExp))param=new RegExp(param);return this.optional(element)||param.test(value)},'Invalid format');$.validator.addMethod("phone",function(value,element){if($.trim(value).length==0)return true;if(/^[0-9 \-,\+\(\)]+$/i.test(value)){var candidates=[].concat(value.split(',')||'');for(var i in candidates){var matches=candidates[i].match(/(\d+)/g);if(matches==null)return false;var number=matches.join("");if(number=='123456789')return false;if(number.length<7||number.length>14)return false};return true};return false},'Proszę podać poprawny numer. Np.: 11 222 333 444 lub 123-123-123');$.validator.addMethod("notstartingwithzero",function(value,element,params){function check(value){if(value[0]=='0')return false;return true};return this.optional(element)||check(value)},'Niepoprawny format numeru telefonu komórkowego');var URLRe=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?|www\.(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/ig;jQuery.validator.addMethod("wwwaddress",function(value,element,param){return this.optional(element)||/^((https?:\/\/)?([-\w]+\.[-\w\.]+)+\w(:\d+)?(\/([-\w\/_\.\,]*(\?\S+)?)?)*)/i.test(value)},jQuery.validator.messages.url);$.validator.addMethod("noemail",function(value,element){function find(value){var re=/[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}/i;while((matched=re.exec(value))!=null){$.validator.messages['noemail']='Wpisałeś frazę: %s, która nie jest dozwolona w tym polu.'.replace('%s',matched[0])+'.';return true};var re2=/[@]/i;while((matched=re2.exec(value))!=null){$.validator.messages['noemail']='Wpisałeś frazę: %s, która nie jest dozwolona w tym polu.'.replace('%s',matched[0])+'.';return true};return false};return this.optional(element)||!find(value)},'Wpisałeś frazę: %s, która nie jest dozwolona w tym polu.');$.validator.addMethod("email",function(value,element){function checkEmail(value){if(value.search('"')<0)return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(value);return false};return this.optional(element)||checkEmail(value)},'Niepoprawny adres e-mail');$.validator.addMethod("nowww",function(value,element){function find(value){if((matched=value.match(URLRe))!=null){$.validator.messages['nowww']='Wpisałeś frazę: %s, która nie jest dozwolona w tym polu.'.replace('%s',matched[0])+'.';return true};return false};return this.optional(element)||!find(value)},'Wpisałeś frazę: %s, która nie jest dozwolona w tym polu.');$.validator.addMethod("nocyrillic",function(value,element){function find(value){if(value.match(/[абвгдеёжзийклмнопрстуфхцчшщъыьэюяабвгдеёжзийклмнопрстуфхцчшщъыьэюя]/g)!=null)return true;return false};return this.optional(element)||!find(value)},'Field is not valid. Cyrillic is not allowed');$.validator.addMethod("nophone",function(value,element){function find(value){var baseRegex=new RegExp(/([0-9][0-9\(\)\-\s*]{6,11})/gi),slandoRegex=new RegExp(/([0-9][0-9\(\)\-\s*\.\,]{6,11})/gi),baseReplacePattern=/[ \(\)\-\s*]/g,slandoReplacePattern=/[ \-\.\s*]/g;value=value.replace(URLRe,' ');var re=baseRegex,replacePattern=baseReplacePattern,slando=false;while((matched=re.exec(value))!=null){if(slando){var ignorePattern=new RegExp(/([\(\)\,])/gi);if(ignorePattern.exec(value)!=null)return false};var numbers=matched[0].replace(replacePattern,'');if(numbers.length>=7&&numbers.length<=11){$.validator.messages['nophone']='Wpisałeś frazę: %s, która nie jest dozwolona w tym polu. Twój numer telefonu możesz podać w innych miejscach formularza'.replace('%s',matched[0])+'.';return true}};return false};return this.optional(element)||!find(value)},'Wpisałeś frazę: %s, która nie jest dozwolona w tym polu. Twój numer telefonu możesz podać w innych miejscach formularza');$.validator.addMethod("adult_age",function(value,element){function check(value){value=parseInt(value);return value>=18?true:false};return this.optional(element)||check(value)},'You have to be adult');$.validator.addMethod("alphanum",function(value,element){function check(value){return/^[a-z0-9._-]+$/i.test(value)};return this.optional(element)||check(value)},'W tym polu niedozwolone są znaki specjalne');$.validator.addMethod("subdomain",function(value,element){function check(value){return/^[a-z0-9]+$/i.test(value)};return this.optional(element)||check(value)},'W tym polu niedozwolone są znaki specjalne');$.validator.addMethod("yahooid",function(value,element){function check(value){return value.indexOf('._')==-1&&value.indexOf('_.')==-1&&value.indexOf('-')==-1&&value.indexOf('..')==-1&&value.indexOf('__')==-1&&/^[a-z0-9._-]+$/i.test(value)&&value.split('.').length<3&&!/^[0-9]/i.test(value)};return this.optional(element)||check(value)},'Invalid YahooID');$.validator.addMethod("skype",function(value,element){function check(value){return/^[:a-z0-9._@-]+$/i.test(value)};return this.optional(element)||check(value)},'W tym polu niedozwolone są znaki specjalne i cyfry');$.validator.addMethod("person",function(value,element){return!(/[`~!@#$%^&*()_|+\=?;:",.<>\{\}\[\]\\\/]+/i.test(value))},'W tym polu niedozwolone są znaki specjalne i cyfry');$.validator.addMethod("currency",function(value,element){function check(value){if($('[name="data[param_price][currency]"]').length)return $('[name="data[param_price][currency]"]').val()!='';return true};return this.optional(element)||check(value)},'Musisz podać cenę');jQuery.validator.addMethod("minprice",function(value,element,params){function check(value){if(categoriesJSON[categoryID].rmoderation_minprice){var value=parseFloat(value.replace(thousands_separator,'').replace(decimal_separator,'.').replace(' ',''));if(defaultCurrency==$('[name="data[param_price][currency]"]').val()||defaultCurrency==''){if(parseFloat(categoriesJSON[categoryID].rmoderation_minprice)>value)return false}else if($('[name="data[param_price][currency]"]').val()=='USD'){if(parseFloat(categoriesJSON[categoryID].rmoderation_minprice_USD)>value)return false}else if($('[name="data[param_price][currency]"]').val()=='EUR')if(parseFloat(categoriesJSON[categoryID].rmoderation_minprice_EUR)>value)return false};return true};return check(value)},'Podana cena jest za niska');jQuery.validator.addMethod("maxprice",function(value,element,params){function check(value){if(categoriesJSON[categoryID].rmoderation_maxprice){var value=parseFloat(value.replace(thousands_separator,'').replace(decimal_separator,'.'));if(defaultCurrency==$('[name="data[param_price][currency]"]').val()||defaultCurrency==''){if(parseFloat(categoriesJSON[categoryID].rmoderation_maxprice)<value)return false}else if($('[name="data[param_price][currency]"]').val()=='USD'){if(parseFloat(categoriesJSON[categoryID].rmoderation_maxprice_USD)<value)return false}else if($('[name="data[param_price][currency]"]').val()=='EUR')if(parseFloat(categoriesJSON[categoryID].rmoderation_maxprice_EUR)<value)return false};return true};return check(value)},'Podana cena jest za wysoka');$.validator.addMethod("seekingintitle",function(value,element){function check(value){if($('#category-container').val()!=""){var categoryID=parseInt($('#category-container').val());if(typeof seekingcategoriesSON!=='undefined'&&jQuery.inArray(categoryID,seekingcategoriesSON)<0){var title=$('#add-title').val().replace(/\s+/,' '),tokens=title.split(' ');for(i in tokens){var t=tokens[i].toLowerCase();for(j in seekingkeywordsJSON)if(seekingkeywordsJSON[j].toLowerCase)if(t==seekingkeywordsJSON[j].toLowerCase())return false}}};return true};return this.optional(element)||check(value)},'Oferty typu "Poszukuję" nie są dozwolone');$.validator.addMethod('map_addres_tablica6',function(value,element){function check(){var $mapAddress=$('#mapAddress'),isFocus=$mapAddress.is(':focus'),hasCity=$('input#map-city-hidden').val()!=''&&$('input#map-city-hidden').val()!='undefined';return isFocus||hasCity};return this.optional(element)||check()},function(){return'Wpisz kod pocztowy lub nazwę miejscowości, a następnie wybierz ją z listy'});$.validator.addMethod('map_addres_contact_tablica6',function(value,element){function check(){var $mapAddress=$('#formContactDataFormCity'),isFocus=$mapAddress.is(':focus'),hasCity=$('#contact-city-hidden').val()!=''&&$('#contact-city-hidden').val()!='undefined';return isFocus||hasCity};return this.optional(element)||check()},function(){return'Wpisz kod pocztowy lub nazwę miejscowości, a następnie wybierz ją z listy'});$.validator.addMethod("contactform",function(value,element){function check(){if(!$('#add-mail-resposne').is(':checked'))return true;var otherForm=false;$('#add-phone, #add-gg, #add-skype').each(function(){var val=$.trim($(this).val());if(val)otherForm|=true});return otherForm};return this.optional(element)||check()},'Podaj inną metodę kontaktu');$.validator.addMethod('nocapslock',function(value,element){var total=value.length,splitted=value.split(''),capital=$.grep(splitted,function(c){return c.toLowerCase()!=c}),percent=total>0?(100*capital.length)/total:0;return this.optional(element)||percent<50},'W tekście jest zbyt wiele znaków z użyciem CAPS LOCK');$.validator.addMethod('price',function(value,element){if(window.namespace!==undefined&&window.namespace=='i2')value=value.replace('.',decimal_separator);value=value.replace(new RegExp(thousands_separator,'g'),'');var expr='^(?:\\d{1,3}\\'+thousands_separator+'(?:\\d{3}\\'+thousands_separator+')*\\d{3}(?:\\'+decimal_separator+'\\d{1,2})?|\\d+(?:\\'+decimal_separator+'\\d{1,2})?)$';if($("input[name='data[param_price][0]'][value='free']").length){return this.optional(element)||(new RegExp(expr).test(value.split(' ').join(''))&&parseFloat(value.replace(thousands_separator,'').replace(decimal_separator,'.'))>=0)}else return this.optional(element)||(new RegExp(expr).test(value.split(' ').join(''))&&parseFloat(value.replace(thousands_separator,'').replace(decimal_separator,'.'))>0)},'Proszę podać poprawną cenę. Np.: 23'+(thousands_separator==' '?'&nbsp;':thousands_separator)+'123'+decimal_separator+'33');$.validator.addMethod('priceInt',function(value,element){var expr='^[1-9][0-9]*$';if($("input[name='data[param_price][0]'][value='free']").length){return this.optional(element)||(new RegExp(expr).test(value)>=0)}else return this.optional(element)||(new RegExp(expr).test(value.replace(/\s{1,}/g,''))>0)},'Proszę podać poprawną cenę. Np.: 23');$.validator.addMethod('priceIntHu',function(value,element){var expr='^[1-9][0-9]*$';if($("input[name='data[param_price][0]'][value='free']").length){return this.optional(element)||(new RegExp(expr).test(value)>0)}else return this.optional(element)||(new RegExp(expr).test(value.replace(/\s{1,}/g,''))>0)},'Please only use numbers when setting the price!');$.validator.addMethod("isNip",function(value,element){return true});$.validator.addMethod("withoutSpecialChars",function(value,element){function check(value){value+="";if($(element).attr('name')=='invoicedata[name]'&&(sitecode=='otomotopl'||sitecode=='autovitro')){var chars='!#$%^*()_+=<>[]{}"\\/`~|'.split('')}else var chars='!#$%^*()_+=<>[]{}\'"\\/`~|'.split('');for(var i=0;i<chars.length;i++)if(value.indexOf(chars[i])!==-1)return false;return true};return this.optional(element)||check(value)},'W tym polu niedozwolone są znaki specjalne');$.validator.addMethod("maxlengthWithoutSpaces",function(value,element,param){function check(value){var formattedValue=value.replace(/\s/g,'');if(formattedValue.length>param)return false;return true};return this.optional(element)||check(value)},'Nie może być dłuższe niż {0} znaków');$.validator.addMethod('withoutSelectedChars',function(value,element,chars){function check(value,pattern){value+="";var chars=pattern.split('');for(var i=0;i<chars.length;i++)if(value.indexOf(chars[i])!==-1)return false;return true};return this.optional(element)||check(value,chars)},'W tym polu niedozwolone są znaki specjalne');$.validator.addMethod('withoutDots',function(value,element){function check(value){value+="";return value.indexOf('.')===-1};return this.optional(element)||check(value)},'To pole nie może zawierać kropek.');$.validator.addMethod('withoutNumbers',function(value,element){value+="";return this.optional(element)||!/[0-9]/.test(value)},'To pole nie może zawierać cyfr.');$.validator.addMethod("notDefault",function(value,element,param){if(!this.depend(param,element))return"dependency-mismatch";return element.value&&element.value!=$(element).attr('defaultval')},'To pole jest wymagane');$.validator.addMethod('equalTo',function(value,element,param){return $(element).val()==$(param).val()},'Hasła muszą być identyczne');$.validator.addMethod("equals",function(value,element,string){return $.inArray(value.toLowerCase(),string)!==-1},'The string you provided does not fit');$.validator.addMethod('unsignedInt',function(value,element,param){return this.optional(element)||/^[0-9]+$/.test(value)},'Invalid unsigned integer value');$.validator.addMethod('digits',function(value,element){newValue=parseFloat(value.replace(new RegExp(thousands_separator,"g"),'').replace(decimal_separator,''));if(!this.optional(element)&&!isNaN(newValue)&&newValue!=value)$(element).val(newValue);return this.optional(element)||/^\d+$/.test(newValue)},'Proszę podać same cyfry.');(function(){function check(elA,elB){var $elA=$(elA),$elB=$(elB);if($elA.length==0||$elB.length==0)return true;var a=$elA.val(),b=$elB.val();return/^[0-9]{2}$/.test(a)&&/^[0-9]{3}$/.test(b)&&!(a==='00'&&b==='000')};$.validator.addMethod("postcodeA",function(value,element){return this.optional(element)||check(element,$(element).attr('data-postcode-b'))},'Niepoprawny kod pocztowy');$.validator.addMethod("postcodeB",function(value,element){return this.optional(element)||check($(element).attr('data-postcode-a'),element)},'Niepoprawny kod pocztowy')})();$.validator.addMethod("isregon",function(value,element){function check(regon){regon+='';regon=regon.replace(/[^0-9]+/g,'');if(regon.length!=9&&regon.length!=14)return false;var regonLength=regon.length,digitsWeight=[];digitsWeight[9]=[8,9,2,3,4,5,6,7];digitsWeight[14]=[2,4,8,5,0,9,7,3,6,1,2,4,8];var controlSum=0;for(var i=0;i<regonLength-1;i++)controlSum+=(regon.charAt(i)*1)*digitsWeight[regonLength][i];var controlMod=(controlSum%11),controlDig=(controlMod==10)?0:controlMod;return(controlDig==(regon.charAt(regonLength-1)*1))};return this.optional(element)||check(value)},'Nieprawidłowy format numeru REGON');$.validator.addMethod("postcodePL",function(value,element){function check(value){return/^[0-9]{2}-[0-9]{3}$/i.test(value)};return this.optional(element)||check(value)},'Niepoprawny kod pocztowy');$.validator.addMethod("vin",function(value,element){function check(value){if(!value.length){return true}else{var vin=value.toLowerCase();if(!/^[^\Wioq]{17}$/.test(value))return false;return true}};return check(value)},'Niepoprawny numer VIN');$.validator.addMethod("subdomain",function(value,element){function check(value){return/^[a-z0-9\-]+$/i.test(value)};return this.optional(element)||check(value)},'Tylko litery, cyfry i myślnik są dozwolone');(function($){$.each($.validator.methods,function(key,value){$.validator.methods[key]=function(){if(arguments.length>0)arguments[0]=$.trim(arguments[0]);return value.apply(this,arguments)}})}(jQuery));(function($,__){'use strict';$.validator.addMethod("postcode1",function(value,element){function check(value){return/^[0-9]{2}$/i.test(value)};return this.optional(element)||check(value)},'Niepoprawny kod pocztowy');$.validator.addMethod("postcode2",function(value,element){function check(value){return/^[0-9]{3}$/i.test(value)};return this.optional(element)||check(value)},'Niepoprawny kod pocztowy');$.validator.addMethod("postcode",function(value,element){return this.postcodePL(value,element)},'Niepoprawny kod pocztowy');$.validator.addMethod("isnip",function(value,element){function check(value){var nip=value.toString(),hasValidFormat=/^\d{10}$/.test(nip),controlCharacters=[6,5,7,2,3,4,5,6,7],checkSum;if(!hasValidFormat)return false;checkSum=controlCharacters.reduce(function(carry,character,index){return carry+character*parseInt(nip.charAt(index),10)},0);return(checkSum%11)===parseInt(nip.charAt(9),10)};return this.optional(element)||check(value)},'Niepoprawny NIP')}(jQuery,__));AddingClass=ValidatorsClass.extend({initToExtend:function(){this.delayTimer=null;this.submitting=false;this.$form=$('#newOffer');this.formOriginAction=this.$form.attr("action");this.uploaders=new Array();this.map=null;this.marker=null;this.offeringLabel;this.seekingLabel;this.actualCategory=0;this.maxUploadedFiles=12;this.actualUploadedFiles=0;this.removeConfirmation=window.edit_ad==0;this.initCategorySelector();this.initValidator();this.initCssFixes();this.initCategories();this.initChangeRegion();this.initSimpleUploader();this.initCloseForm();this.initGeoSuggest();this.initMap();this.initEditContactMap();this.initCounters();this.initValidators();this.initSuggest();this.initPhotos();this.initSubmit();this.initAutoresize();this.initKeyUp();this.initFocusOut();this.initHideManyCheckboxes();this.initToggleAdditionalGroups();if(typeof window.edit_ad!='undefined'&&window.edit_ad>0)this.toggleMaxPhotos($('#category-container').val());this.lastClickedTypeOfPrice=null;if(window.edit_ad>0){if(history.state)this.handlePushStates();this.handleEditView();if(!$('p.error:visible').length)this.$form.valid()};this.initUploadPhotosButton()},handleEditView:function(){var und1=$("input[name='data[param_price][0]'][value='exchange']").attr('checked')==undefined,und2=$("input[name='data[param_price][0]'][value='free']").attr('checked')==undefined,und3=$("input[name='data[param_price][0]'][value='price']").attr('checked')==undefined;if(und1&&und2&&und3){$("input[name='data[param_price][0]'][value='price']").prop('checked',true);$("input[name='data[param_price][0]'][value='price']").change()}},handlePushStates:function(){$("input[name='data[param_price][0]'][checked='checked']").prop("checked",false);if(history.state.pp0=='price'){$("input[name='data[param_price][0]'][value='price']").prop('checked',true);$("input[name='data[param_price][0]'][value='price']").change()}else if(history.state.pp0=='exchange'){$("input[name='data[param_price][0]'][value='exchange']").prop('checked',true);$("input[name='data[param_price][0]'][value='exchange']").change()}else if(history.state.pp0=='free'){$("input[name='data[param_price][0]'][value='free']").prop('checked',true);$("input[name='data[param_price][0]'][value='free']").change()};$("input[name='data[param_price][1]']").val(history.state.pp1);if(history.state.pp2=='checked')$("input[name='data[param_price][2]']").prop('checked',true)},checkCourierAvailability:function(category_id){$.get(www_base+'/ajax/adding/availableforcategory/',{cid:category_id},function(data){if(data.is_available){$('#courierpromoBanner').addClass('hidden');$('#courier-label-normal').removeClass('hidden');$('#courier-label-contest').addClass('hidden');$('#courier-container').removeClass('hidden')}else{$('#courier-container').addClass('hidden').find('#courier-delivery').prop('checked',false).change();$('#courierpromoBanner').addClass('hidden')}},'json')},initErrorReport:function(data){var code='',codeM='d';if(this.isMobile())codeM='m';var category=$('#mainCategorySelect').val();switch(category){case'29':code='cars';break;case'1':code='agro';break;case'73':code='utility';break;case'57':code='track';break;case'65':code='motorbike';break;case'31':code='construction';break;case'9':code='traile';break;default:code=null};if(code!=null){code='adding_'+code+'_'+codeM;dataLayer.push({event:code})}},showErrorMessage:function(html){$('#uploadError p.invalid').html(html);$('#uploadError').modal('show');$('#uploadError a.ok').click(function(e){e.preventDefault();$('.modal').modal('hide')})},showDialogMessage:function(html,title){$('#dialogMessage .inner').html(html);$.fancybox({href:'#dialogMessage',onStart:function(){$('#dialogMessage').css({width:842,maxHeight:$(window).height()-150,overflow:'auto'}).show()},onComplete:function(){$('#fancybox-title-inside').addClass('nophotolayerTitle')},onCleanup:function(){$('#dialogMessage').unwrap()},onClosed:function(){$('#dialogMessage').hide();$('#fancybox-title-inside').removeClass('nophotolayerTitle')},title:'<p class="marginleft15 lheight22">'+title+'</p>',scrolling:'no',autoScale:false,autoDimensions:true})},initKeyUp:function(){$('#add-gg, #add-phone, #add-skype').bind('keyup',function(){$('#add-email').focusout()})},initAutoresize:function(){$('textarea#add-description').autoResize({extraSpace:50}).trigger('change')},initFocusOut:function(){this.$form.on('focusout','select,input',function(){if($(this).val()=='')$(this).closest('div.fblock').removeClass('complete')})},initAccountType:function(){$('input[type="radio"]',$('#contacttype')).change(function(){var $this=$(this);$('#person').removeClass('hidden').removeClass('disabled').find('#add-person').removeAttr('disabled');$('#gg').removeClass('hidden').removeClass('disabled').find('#add-gg').removeAttr('disabled');$('#skype').removeClass('hidden').removeClass('disabled').find('#add-skype').removeAttr('disabled');if($this.val()=='email'){$('#email').removeClass('hidden').removeClass('disabled').find('#add-email').removeAttr('disabled');$('#email_option').removeClass('hidden').removeClass('disabled');$('#sms').addClass('hidden').find('#add-sms').val('');$('#phone').removeClass('hidden').removeClass('disabled').find('#add-phone').removeAttr('disabled')}else{$('#email').addClass('hidden').find('#add-email').val('');$('#sms').removeClass('hidden').removeClass('disabled').find('#add-sms').removeAttr('disabled');$('#phone').addClass('hidden').find('#add-phone').val('')}})},enableSubmit:function(){$("input[name='data[preview]']").remove();this.$form.attr("action",this.formOriginAction);$('#save').parent('.button').removeClass('disabled waiting')},disableSubmit:function(){$('#save').parent('.button').addClass('disabled waiting')},initSubmit:function(){var thiz=this;this.$form.on('keypress','input:text',function(e){if(e.which==13)return false});$('#preview-link').bind('click',function(){var adId=thiz.getAdID();thiz.formOriginAction=thiz.$form.attr("action");if(adId){thiz.$form.attr("action",www_base+'/adding/preview/'+adId+'/')}else thiz.$form.attr("action",www_base+'/adding/preview/');thiz.$form.data('type','preview');thiz.$form.submit();return false});$(document).on('click','#get-mms-details',function(){var $this=$(this);$.get(www_base+'/ajax/adding/mms/',{id:$(adID).val()},function(data){var $html=$(data);$('.mmsArea').html(data);$this.parent().html($html.find('span:first'))},'html');return false});$('#save').click(function(){if($.browser.webkit&&thiz.lastClickedTypeOfPrice!=null){$('#parametersContainer input[type=radio]').click(function(){$this=$(this);$this.removeProp('checked')});$('#'+thiz.lastClickedTypeOfPrice).prop('checked',true)};thiz.$form.data('type','save')});this.$form.bind('submit',function(event){thiz.submitting=true;var $saveButton=$('#save').parent('.button');if(thiz.$form.validate().numberOfInvalids()>0){thiz.enableSubmit();thiz.initErrorReport(thiz.$form)}else{if($saveButton.hasClass('disabled'))return false;thiz.disableSubmit();if(thiz.$form.data('type')==='save'){$('body').trigger('postingFormSubmit')}else if(thiz.$form.data('type')==='preview')$('body').trigger('postingFormPreview')};if($('#category-container').closest('div.fblock').hasClass('error'))$('.categories-select:first').focus().trigger("focusin");if($('#category-container').closest('div.fblock').hasClass('error'))$('#add-title').focus();if(!$('#add-email').valid()&&thiz.$form.validate().numberOfInvalids()==1){thiz.enableSubmit();$('html, body').animate({scrollTop:$('#add-email').offset().top},100)};if($('#subregion-id-select option:selected').val()){var subregion=thiz.getSubregion($('#subregion-id-select option:selected').val()),coords=thiz.getMapCoords();if(parseFloat(subregion.lat)==coords.lat&&parseFloat(subregion.lon)==coords.lon&&parseInt(subregion.zoom)+3==coords.zoom)thiz.saveMapCoords(subregion.lat,subregion.lon,subregion.zoom)};for(i in thiz.uploaders){var uploader=thiz.uploaders[i];if(uploader.state==plupload.UPLOADING){alert('Trwa ładowanie zdjęć');thiz.enableSubmit();return false}};if($('#add-email').valid()<=0)return false;thiz.$form.find('.input-image-hidden').remove();if($('li.with-photo:visible').length>0){$('.input-image').remove();$('li.with-photo:visible').each(function(){thiz.$form.append('<input class="input-image" type="hidden" name="image[]" value="'+$(this).data('slot')+'"/>')})};if($.browser.webkit&&window.edit_ad>0)history.replaceState({pp0:$("input[name='data[param_price][0]']:checked").val(),pp1:$("input[name='data[param_price][1]']").val(),pp2:$("input[name='data[param_price][2]']").attr('checked')},"",location.href)})},initValidators:function(){$('#add-mail-resposne').bind('click',function(){$(this).valid()});if(typeof window.validate_message!='undefined'){ShowMessage.error(window.validate_message);$(document).ready(function(){setTimeout(function(){thiz.$form.valid();if(thiz.$form.validate().numberOfInvalids())for(var i in thiz.$form.validate().invalid)this.$form.find('[name="'+i+'"]').valid()},300)})};var params={rules:{'data[person]':{required:false}}};this._super(params);if($("#mapAddress").length)$("#mapAddress").rules("add",{required:true,map_addres_tablica6:true,messages:{required:'Wpisz kod pocztowy lub nazwę miejscowości, a następnie wybierz ją z listy'}})},initSuggest:function(){thiz=this;var elements='input[type=text], input[type=checkbox], textarea, select',gallerySection='#gallery';this.$form.on('focusin',elements,function(){thiz.showSuggest($(this))});this.$form.on('focusout',elements,function(){thiz.hideSuggest($(this));if($('#add-title').siblings('.suggest').is(':visible')){return}else if($('#add-description').siblings('.suggest').is(':visible')){return}else if($('a.camp1').length){return}else $('#innerLayout').css('min-width','')});this.$form.find(gallerySection).bind('mouseover mouseleave',function(e){if(e.type=='mouseover'){thiz.showSuggest($(this))}else thiz.hideSuggest($(this))})},showSuggest:function($element){if(!$element.closest('div.fblock').hasClass('error'))if($element.closest('div.fblock').find('.suggest').find('.suggest').length>0)$element.closest('div.fblock').find('.suggest').show()},hideSuggest:function($element){$element.closest('div.fblock').not('.error').find('.suggest').not('.readonly').hide()},initCounters:function(){$('.counter-placeholder').each(function(){var $counter=$(this),$input=$('#'+$(this).data('forId')),$inputTextLength=$input.val().length;if($inputTextLength>0){var charsLeft=$input.data('maxtext')-$inputTextLength;$counter.text(charsLeft)};$input.bind('keyup blur input',function(){if($input.data('maxtext')!=undefined){var stripTags=$input.data('striptags'),max=$input.data('maxtext');if(stripTags==true){var size=$input.val().replace(/<\/?[^>]+>/gi,'').length}else var size=$input.val().length;var left=max-size;if(left<0){$input.val($input.val().substring(0,max));left=0};$counter.text(left)}})})},getMap:function(){return this.map},hideMap:function(){var $mapContainer=$('.mapcontainer').hide();$mapContainer.parent().css("minHeight",'')},hideMarker:function(marker){if(marker!=undefined){marker.setMap(null);marker=null}},showMap:function(options,markerOptions){thiz=this;var $mapContainer=$('.mapcontainer').show(),$mapDiv=$('#googlemap').show(),$mapHeight=$mapContainer.height();if($mapContainer.hasClass('abs'))$mapContainer.parent().css("minHeight",$mapHeight+20);var map=new google.maps.Map(document.getElementById($mapDiv.attr('id')),options);this.map=map;if(markerOptions!=undefined){thiz.marker=new google.maps.Marker($.extend(markerOptions,{map:map}));google.maps.event.addListener(thiz.marker,'dragend',function(){thiz.saveMapCoords(thiz.marker.getPosition().lat(),thiz.marker.getPosition().lng(),map.getZoom());thiz.marker.setIcon(thiz.getDefaultMarkerIcon())});google.maps.event.addListener(thiz.marker,'dragstart',function(){$('#map-hint').hide()});google.maps.event.addListener(map,'center_changed',function(){$('#map-hint').hide()})};google.maps.event.addListener(map,'bounds_changed',function(){thiz.saveMapCoords(map.getCenter().lat(),map.getCenter().lng(),map.getZoom())});google.maps.event.addListener(map,'zoom_changed',function(){thiz.saveMapCoords(map.lat,map.lon,map.getZoom())})},isShowingMap:function(){return $('#googlemap').is(':visible')},saveCity:function(cID){$('input#map-city-hidden').remove();this.$form.append('<input class="map-city" id="map-city-hidden" type="hidden" name="data[city_id]" value="'+cID+'"/>')},saveRadius:function(radius){$('input.map-radius').remove();this.$form.append('<input class="map-radius" type="hidden" name="data[map_radius]" value="'+Math.round(radius)+'"/>')},saveDistrict:function(dID){$('input.map-district').remove();this.$form.append('<input class="map-district" type="hidden" name="data[district_id]" value="'+dID+'"/>')},saveMapCoords:function(lat,lon,zoom){if(lat==undefined||lon==undefined||zoom==undefined)return;$('input.map-coords').remove();this.$form.append('<input class="map-coords" rel="zoom" type="hidden" name="data[map_zoom]" value="'+zoom+'"/>');this.$form.append('<input class="map-coords" rel="lat"  type="hidden" name="data[map_lat]" value="'+lat+'"/>');this.$form.append('<input class="map-coords" rel="lon"  type="hidden" name="data[map_lon]" value="'+lon+'"/>')},getMapCoords:function(){var cords={lon:undefined,lat:undefined,zoom:undefined};$('.map-coords').each(function(){if($(this).val())cords[$(this).attr('rel')]=parseFloat($(this).val())});return cords},getDistricts:function(subregionID){var districts=new Array();if(typeof districtsJSON==='undefined')return districts;for(i in districtsJSON)if(subregionID==districtsJSON[i]['subregion_id'])districts.push(districtsJSON[i]);districts.sort(this.sortObjectsByName);return districts},getDistrict:function(districtID){if(typeof districtsJSON==='undefined')return null;return districtsJSON[districtID]},getSubregions:function(regionID){subregions=new Array();for(i in subregionsJSON)if(regionID==subregionsJSON[i]['region_id'])subregions.push(subregionsJSON[i]);subregions.sort(this.sortObjectsByName);return subregions},getSubregion:function(subregionID){return subregionsJSON[subregionID]},getRegion:function(regionID){return regionsJSON[regionID]},delay:function(){var thiz=this;return function(callback,ms){clearTimeout(thiz.delayTimer);thiz.delayTimer=setTimeout(callback,ms)}}(),initGeoSuggest:function(){$('#ad-location').geosuggest({levels:['DISTRICT'],showPopularLocations:false,countryElement:$('#countryId')})},initRegions:function(){var thiz=this;$('#region-id-select').change(function(){var regionID=$(this).val(),subregionID=null,chooseLabel='Wybierz';if(regionID.search('_')>0){regionID=parseInt(regionID);subregionID=$(this).find('option:selected').data("subregion_id")};$select=$("#subregion-id-select").find('option').remove().end();$select.append('<option value="" class="chooselabel">'+chooseLabel+'</option>');var subregions=thiz.getSubregions(regionID);for(i in subregions)$select.append('<option value="'+subregions[i]['id']+'">'+subregions[i]['name']+' </option>');$('#subregion-id').removeClass('complete');$('#map_address').hide().find('#mapAddress').val("").attr('disabled',true);$('.mapcontainer .icon.arrow4').hide();$('#map-hint').hide();if(subregionID!=null){$select.val(subregionID);$('#subregion-id').hide();$('#map_address').show().find('#mapAddress').attr('disabled',false)}else $('#subregion-id').show();$select.trigger('modified');if((thiz.isShowingMap()||subregionID!=null)){region=thiz.getRegion(regionID);var marker=undefined;if(subregionID!=null){region=thiz.getSubregion(subregionID);marker={position:new google.maps.LatLng(region.lat,region.lon),draggable:true,icon:thiz.getDefaultMarkerIcon()}};if(region)thiz.showMap({center:new google.maps.LatLng(region.lat,region.lon),mapTypeId:google.maps.MapTypeId.ROADMAP,zoom:parseInt(region.zoom),scrollwheel:false,streetViewControl:false},marker)}})},getZipLength:function(){return 5},initMap:function(){},getRadius:function(){return $('.map-radius').val()?parseInt($('.map-radius').val()):0},haveCity:function(){return $('#map-city-hidden').val()?true:false},changeMap:function(checkbox_id){if($(checkbox_id).is(':checked')){$(checkbox_id).change()}else $(checkbox_id).click()},showMap6Accurate:function(lat,lon,zoom){thiz.hideMarker(thiz.radiusMarker);thiz.hideMarker(thiz.marker);thiz.hideMarker(thiz.circle);thiz.marker.setMap(thiz.map);thiz.saveRadius(0);thiz.marker.setVisible(true);google.maps.event.addListener(thiz.marker,'dragstart',function(){$('#map-hint').hide()})},getMinMapRadius:function(){return 300},showMap6Approximate:function(lat,lon,zoom){var radiusMarkerIcon=new google.maps.MarkerImage(radius_marker_icon,new google.maps.Size(26,26),new google.maps.Point(0,0),new google.maps.Point(13,12)),radius=thiz.getRadius()?Math.min(thiz.getRadius(),3e3):(zoom>=13?2e3:3e3);thiz.saveRadius(radius);thiz.circle=new google.maps.Circle({strokeColor:'#eeb1a6',strokeOpacity:0.8,strokeWeight:5,fillColor:'#f7dcd7',fillOpacity:0.35,map:thiz.map,center:thiz.marker?thiz.marker.getPosition():new google.maps.LatLng(lat,lon),draggable:true,radius:radius});thiz.radiusMarker=new google.maps.Marker({map:thiz.map,draggable:true,raiseOnDrag:false,position:google.maps.geometry.spherical.computeOffset(thiz.marker?thiz.marker.getPosition():new google.maps.LatLng(lat,lon),radius,90),icon:radiusMarkerIcon,zIndex:10});thiz.marker&&thiz.marker.setVisible(false);google.maps.event.addListener(thiz.radiusMarker,'drag',function(){var dist=google.maps.geometry.spherical.computeDistanceBetween(thiz.circle.getCenter(),thiz.radiusMarker.getPosition());if(dist>radius||dist<thiz.getMinMapRadius()){var heading=thiz.mapMarkersHeading(thiz.circle.getCenter().lat(),thiz.circle.getCenter().lng(),thiz.radiusMarker.getPosition().lat(),thiz.radiusMarker.getPosition().lng()),pointDist=dist;if(pointDist<thiz.getMinMapRadius()){pointDist=thiz.getMinMapRadius()}else if(dist>radius)pointDist=radius;thiz.radiusMarker.setPosition(google.maps.geometry.spherical.computeOffset(thiz.circle.getCenter(),pointDist,heading));thiz.circle.setRadius(pointDist);return false};thiz.saveRadius(dist);thiz.circle.setRadius(dist)});google.maps.event.addListener(thiz.circle,'drag',function(){thiz.radiusMarker.setPosition(google.maps.geometry.spherical.computeOffset(thiz.circle.getCenter(),thiz.circle.getRadius(),90));thiz.marker.setPosition(thiz.circle.getCenter())});google.maps.event.addListener(thiz.circle,'dragend',function(){thiz.saveMapCoords(thiz.circle.getCenter().lat(),thiz.circle.getCenter().lng(),thiz.map.getZoom())});google.maps.event.addListener(thiz.circle,'dragstart',function(){$('#map-hint').hide()});google.maps.event.addListener(thiz.radiusMarker,'dragstart',function(){$('#map-hint').hide()})},mapMarkersHeading:function(lat1,lon1,lat2,lon2){lat1=lat1*Math.PI/180;lat2=lat2*Math.PI/180;var dLon=(lon2-lon1)*Math.PI/180,y=Math.sin(dLon)*Math.cos(lat2),x=Math.cos(lat1)*Math.sin(lat2)-Math.sin(lat1)*Math.cos(lat2)*Math.cos(dLon),brng=Math.atan2(y,x);return(((brng*180/Math.PI)+360)%360)},mapLocationType:function(lat,lon,zoom){},initDistricts:function(){var chooseLabel='Wybierz';$('#region-id-select').bind('change',function(){$("#district-id").hide()});$("#subregion-id-select").bind('change',function(){$("#district-id").hide();$select=$("#district-id-select").find('option').remove().end();$select.append('<option value="" class="chooselabel">'+chooseLabel+'</option>');var districts=thiz.getDistricts($(this).val());for(i in districts)$select.append('<option value="'+districts[i]['id']+'">'+districts[i]['name']+' </option>');if(districts.length>0)$("#district-id").show();$select.trigger('modified')});$('#district-id-select').bind('change',function(){var district=thiz.getDistrict($(this).val());if(district){var zoom=parseInt(district.zoom);zoom=Math.min(18,zoom+3);if(thiz.getCategoryID()!=''&&categoriesJSON[thiz.getCategoryID()]['show_map'])thiz.showMap({center:new google.maps.LatLng(district.lat,district.lon),mapTypeId:google.maps.MapTypeId.ROADMAP,zoom:zoom,scrollwheel:false,streetViewControl:false},{position:new google.maps.LatLng(district.lat,district.lon),draggable:true,icon:thiz.getDefaultMarkerIcon()})}})},initSubregions:function(){thiz=this;$("#subregion-id-select").bind('change',function(){if(thiz.getCategoryID()!=''&&categoriesJSON[thiz.getCategoryID()]['show_map'])$('#map_address').show().find('#mapAddress').attr('disabled',false);$('.mapcontainer .icon.arrow4').show();$('#map-hint').fadeIn(300);subregion=thiz.getSubregion($(this).val());if(subregion){var zoom=parseInt(subregion.zoom);zoom=Math.min(18,zoom+3);if(thiz.getCategoryID()!=''&&categoriesJSON[thiz.getCategoryID()]['show_map'])thiz.showMap({center:new google.maps.LatLng(subregion.lat,subregion.lon),mapTypeId:google.maps.MapTypeId.ROADMAP,zoom:zoom,scrollwheel:false,streetViewControl:false},{position:new google.maps.LatLng(subregion.lat,subregion.lon),draggable:true,icon:thiz.getDefaultMarkerIcon()})}});if(thiz.getCategoryID()!=''&&categoriesJSON[thiz.getCategoryID()]['show_map']){var showOrHide=$("#subregion-id-select").val()>0;$('#map_address').toggle(showOrHide);if(!showOrHide)$('#mapAddress').val('')}},getDefaultMarkerIcon:function(){return new google.maps.MarkerImage(marker_default,new google.maps.Size(65,48),new google.maps.Point(0,0),new google.maps.Point(27,49))},getCategoryParents:function(category){var categoryID=parseInt(category);if(categoryID==0||isNaN(categoryID))return new Array(0);var parentsTmp=this.getCategoryParents(categoriesJSON[categoryID]['parent_id']);parentsTmp.push(parseInt(categoriesJSON[categoryID]['parent_id']));return parentsTmp},hasCategoryChildren:function(categoryID){if(categoryID==0)return 1;return categoriesJSON[categoryID]['children'].length?1:0},getCategoryChildren:function(categoryID){return categoriesJSON[categoryID]['children']},getCategoryLevel:function(categoryID){return categoriesJSON[categoryID]['level']},getCategoriesBreadcrumb:function(categoryID){var crumb=new Array(),parents=this.getCategoryParents(categoryID);parents.push(categoryID);var first=true;for(cID in parents)if(categoriesJSON[parents[cID]]!=undefined){crumb.push((first?'':'<span class="marginright2">» </span>')+'<span class="nowrap marginright2">'+categoriesJSON[parents[cID]]['name']+'</span>');first=false};return crumb.join(' ')},setCategoryIcon:function(categoryID){var i=this.getCategoryLevel(categoryID)-2;while(i-->0)categoryID=this.getCategoryParents(categoryID).pop();$('#choose-category-button').closest('div').parent().find('div[id^=cat-]').remove();var parentID=this.getCategoryParents(categoryID).pop();if(!parentID)parentID='main';$('#category-breadcrumb-container').before('<div id="cat-'+categoryID+'" class="cat-'+parentID+' marginright10 fleft"><span class="caticon fleft margin0_a block"></span></div>');$('#category-breadcrumb-container').addClass('with-icon');$('#catgory-breadcrumb-text span').last().removeClass('marginright2').addClass('pdingright7');$('#choose-category-button span').text('Zmień')},setBredcrumbHtml:function(text){$('#catgory-breadcrumb-text').html(text)},getCategoryID:function(){return this.$form.find('#category-container').val()},setCategoryID:function(categoryID,dontFocusout){var thiz=this;if(!dontFocusout)this.$form.find('#category-container').val(categoryID).focusout();if(categoryID){if(categoriesJSON[categoryID]['show_map']==1&&($('#mapAddress').val()||$('#ad-location').val())){var $mapAddress=$('#mapAddress, #ad-location'),lat=$mapAddress.data('lat'),lon=$mapAddress.data('lon'),zoom=$mapAddress.data('zoom');if($('.map-coords[name="data[map_lat]"]').val()){var sZoom=parseInt($('.map-coords[name="data[map_zoom]"]').val());lat=$('.map-coords[name="data[map_lat]"]').val();lon=$('.map-coords[name="data[map_lon]"]').val();zoom=sZoom<8?(district?13:12):parseInt($('.map-coords[name="data[map_zoom]"]').val())};thiz.showMap({center:new google.maps.LatLng(lat,lon),mapTypeId:google.maps.MapTypeId.ROADMAP,zoom:zoom,scrollwheel:false,streetViewControl:false},{position:new google.maps.LatLng(lat,lon),draggable:true,icon:thiz.getDefaultMarkerIcon()});if(window.from_preview){if(window.edit_ad!=1){if(thiz.getRadius()==0){thiz.changeMap('#loc-opt-1')}else thiz.changeMap('#loc-opt-2')}else thiz.changeMap(thiz.selectedMap)}else if(window.edit_ad!=1){thiz.changeMap('#loc-opt-2')}else thiz.changeMap(thiz.selectedMap)}else{thiz.hideMap();thiz.saveRadius(0)};var hasPhotos=false,currentCatToCheck=categoryID;while(currentCatToCheck&&!hasPhotos){for(var x in stockPhotosJSON){var def=stockPhotosJSON[x],stockCategoryId=parseInt(def.category);if(stockCategoryId==currentCatToCheck){hasPhotos=true;$('#photo-suggest').addClass('stock-photos');$('#stock-photo-suggest').removeClass('hidden');$('#stock-photo-image').html('<span class="inlblk rel br3 img-good"><img src="'+def.images.good+'" class="vtop"></span><span class="inlblk rel br3 img-bad"><img src="'+def.images.bad+'" class="vtop"></span>');break}};currentCatToCheck=parseInt(categoriesJSON[currentCatToCheck]['parent_id'])};if(!hasPhotos){$('#photo-suggest').removeClass('stock-photos');$('#stock-photo-suggest').addClass('hidden')}}else{$('#photo-suggest').removeClass('stock-photos');$('#stock-photo-suggest').addClass('hidden')};if(categoryID&&typeof categoriesJSON[categoryID]!=='undefined'&&typeof categoriesJSON[categoryID].hint_description!=='undefined')if(categoriesJSON[categoryID].hint_description.length>0){if(typeof categoriesJSON[categoryID]!=='undefined')$('#description').find('ul.suggest').html(categoriesJSON[categoryID].hint_description)}else $('#description').find('ul.suggest').html($('#description').find('ul.suggestDefault').html())},toggleOfferSeek:function(categoryID){if(categoriesJSON[categoryID]['offer_seek']==1){var $select=$('#offer-seek-div').find('select');$select.val("");$select.attr('readonly',false);if(categoriesJSON[categoryID]['offer_name_adding']==''){$select.find('option').eq(1).text(this.offeringLabel);$select.find('option').eq(2).text(this.seekingLabel)}else{$select.find('option').eq(1).text(categoriesJSON[categoryID]['offer_name_adding']);$select.find('option').eq(2).text(categoriesJSON[categoryID]['seek_name_adding'])};$select.removeClass('do-not-validate').end().show();$select.trigger('modified');$('#offer-seek-div').removeClass('complete')}else{$('#offer-seek-div').find('select').val('').addClass('do-not-validate').end().hide();this.getAdditionalParams()}},togglePrivateBusiness:function(categoryID){var $selectPrivateBusiness=$('#private-business-div').find('select');if(categoriesJSON[categoryID]['private_business']==1){$('#priv_buss_opt_priv').text(categoriesJSON[categoryID]['private_name']);$('#priv_buss_opt_buss').text(categoriesJSON[categoryID]['bussiness_name']);$selectPrivateBusiness.removeClass('do-not-validate').end().show().change()}else{$selectPrivateBusiness.val('').addClass('do-not-validate').end().hide().change();if(categoriesJSON[categoryID]['offer_seek']!=1)this.getAdditionalParams()};$selectPrivateBusiness.trigger('modified');$('#private-business-div').removeClass('complete')},toggleMaxPhotos:function(categoryID){var maxPhotos=0;if(typeof categoriesJSON[categoryID]!='undefined'){maxPhotos=parseInt(categoriesJSON[categoryID]['max_photos']);this.maxUploadedFiles=maxPhotos};for(var i=1;i<=maxPhotos;i++){var $photoLI=$('#add-file-'+i),$imageLI=$('#add-img-'+i),$progressLI=$('#add-progress-'+i),$htmlInput=$('#htmlbutton_'+i);$photoLI.removeClass('disabled');if(!$imageLI.length&&!$progressLI.length){$photoLI.removeClass('hidden').show()}else $photoLI.hide();$htmlInput.removeClass('hidden').removeClass('disabled').show();$htmlInput.children('input').prop('disabled',false)};maxPhotos++;var prev=this.removeConfirmation;this.removeConfirmation=true;var deleteButtons={},hasToDelete=false;for(i=maxPhotos;i<=12;i++){var $photoLI=$('#add-file-'+i),$imageLI=$('#add-img-'+i),$progressLI=$('#add-progress-'+i),$htmlInput=$('#htmlbutton_'+i);$photoLI.addClass('hidden').addClass('disabled').hide();if($imageLI.length){deleteButtons[i]=i;hasToDelete=true}else if($progressLI.length)$progressLI.hide().remove();$htmlInput.addClass('hidden').addClass('disabled').hide();$htmlInput.children('input').prop('disabled',true)};$('#photo-quant').text(maxPhotos-1);if(hasToDelete){for(x in deleteButtons)thiz.removePhoto(x,false);$.post(upload_removeimage_url+'?preview='+preview_id,{riak_key:thiz.getRiakKey(),ad_id:thiz.getAdID(),slots:deleteButtons},function(){})};this.removeConfirmation=prev},isInArray:function(needle,haystack){if(typeof haystack!=='object')return false;for(var i=0;i<haystack.length;i++)if(haystack[i]===needle)return true;return false},getAdditionalParams:function(){var thiz=this,$form=thiz.$form,omit=['data[param_price][currency]','data[param_salary][currency]'],serialized=$.param($.grep($form.serializeArray(),function(obj){return thiz.isInArray(obj.name,omit)===false}));$.post(www_base+'/ajax/adding/parameters/',serialized,function(html){thiz.showAdditionalParams(html)})},showAdditionalParams:function(html){var $parametersContainer=$('#parametersContainer');$element=$('input, select',$parametersContainer).each(function(){$(this).rules('remove')});$parametersContainer.html('');$parametersContainer.html(html);if($.browser.webkit){thiz=this;$parametersContainer.find('input[type=radio]').click(function(){var priceId=$(this).attr('id'),$currencySelect=$parametersContainer.find('select[name="data[param_price][currency]"]');if(priceId==='parameter-exchange'||priceId==='parameter-free'){$currencySelect.attr('readonly','readonly')}else $currencySelect.attr('readonly',false);thiz.lastClickedTypeOfPrice=priceId})}},initAdditionalParams:function(){thiz=this;$('#offer-seek-div').bind('change',function(a,b){if($(this).find('select').val())thiz.getAdditionalParams()})},initValidator:function(){$.validator.setDefaults({errorPlacement:function(error,element){var $element=$(element),$div=$element.closest('div.fblock');$div.find('p.error').html(error)},highlight:function(element,errorClass,validClass){var $element=$(element),$div=$element.closest('div.fblock');$div.addClass('error');$div.find('p.error').show().closest('div.suggest').addClass('error').show().find('.suggest').hide();if($div.find('p.error').text()&&$div.find('p.error').text().length>130){$div.closest('div.fblock').find('div.error').addClass('largesuggest')}else $div.find('div.suggest').removeClass('largesuggest')},unhighlight:function(element,errorClass,validClass){var $element=$(element),$div=$element.closest('div.fblock'),$el=$div.removeClass('error').addClass('complete').find('p.error').hide().closest('div.suggest').removeClass('error');if(!$el.find('ul.suggest').length)$el.hide();if($element.is(':focus'))adding.showSuggest($element);if($element.attr('name')=='data[email]')adding.hideSuggest($element)},focusInvalid:false,invalidHandler:function(form,validator){if(!validator.numberOfInvalids())return;if(!validator.settings.dontScrollToError){var scrollTo=0;if($(validator.errorList[0].element).closest('div.fblock').length>0)scrollTo=$(validator.errorList[0].element).closest('div.fblock').offset().top;scrollTo=scrollTo-60;$('html, body').animate({scrollTop:scrollTo},200);window.setTimeout(function(){if(validator.errorList.length)$(validator.errorList[0].element).focus()},100)}},showMsgError:true});$.validator.addMethod('vaildGeoCity',function(_value,_element){var is_valid=$('#formContactDataForm input[name="default[city_id]"]').val();return this.optional(_element)||is_valid})},initCssFixes:function(){var isHighContrast=function(){var hcDetect=$('<div id="hcDetection"></div>').addClass('hc-check').appendTo(document.body);return(hcDetect.css('background-image')=='none')?true:false;$('#hcDetection').remove()};if(!isHighContrast())$('#newOffer').renderForms({ajax:true,ajaxHandler:'#parametersContainer',ajaxAllowedRequestURL:'ajax/adding/parameters/'});$(document).on('mousedown','select',function(){var $this=$(this),$optionToHide=$this.find('option.chooselabel');if($this.data('renderformOptions')==='hideChooselabel')$optionToHide.addClass('hidden')});if(adding.isIOS()&&adding.getIOSVersion()<6)$('#safariWarning').show()},initCloseForm:function(){var thiz=this,$defaultValues=$('input[type=text],textarea,select').filter(function(){return $(this).val()===''});$(window).bind('beforeunload',function(){var hasAction=$('#add-title').val()||$('#add-description').val()||$('input[name="data[category_id]"]',thiz.$form).val()||$('#riakKey').val();if(window.edit_ad<1)if(hasAction&&!thiz.submitting){thiz.submitting=false;return''};$defaultValues.each(function(){$(this).val('')});var paymentFilter=function(attr){return function(){return $(this).attr(attr)!='data[payment_code]'}};$('label.selected').filter(paymentFilter('relname')).removeClass('selected');$('input[type=checkbox],input[type=radio]').filter(paymentFilter('name')).removeAttr('checked');thiz.submitting=false});if((typeof window.edit_ad!='undefined')&&(window.edit_ad>0)&&!(typeof window.have_errors!='undefined'&&window.have_errors>0))window.setTimeout(function(){thiz.$form.valid()},300)},initSimpleUploader:function(){var thiz=this;thiz.$form.find('.removeAttachment, .removeAttachmentUploaded').click(function(e){e.preventDefault();var $this=$(this);if($this.hasClass('removeAttachment')||thiz.removeConfirmation){var $fileInput=$this.prev('input[type=file]');$fileInput.val('').removeClass('hidden').prop("disabled",false).replaceWith($fileInput.clone(true));if($this.siblings('.alternativeImageUploaded').length)$this.siblings('.alternativeImageUploaded').remove();$this.hide()}}).hide();thiz.$form.find('input[type=file]').change(function(){var $this=$(this);if($this.val()!==''){$this.next('.removeAttachment').show()}else $this.next('.removeAttachment').hide()});thiz.$form.find('.alternativeImageUploaded').each(function(){$(this).siblings('.removeAttachmentUploaded').show()})},initChangeRegion:function(){$('#edit-region-id-select').change(function(){var $this=$(this),regionID=$this.val();$select=$("#edit-subregion-id-select").find('option').remove().end();if($this.find(':selected').hasClass('fakeRegion')){$('#edit-subregion-select-block').hide();$('#subregion-for-fake-region').prop('disabled',false).val($this.find(':selected').data("subregion_id"))}else{$('#subregion-for-fake-region').prop('disabled',true);$select.append('<option value="">Wybierz</option>');subregions=new Array();for(i in subregionsJSON)if(regionID==subregionsJSON[i]['region_id'])subregions.push(subregionsJSON[i]);for(i in subregions)$select.append('<option value="'+subregions[i]['id']+'">'+subregions[i]['name']+' </option>');$('#edit-subregion-select-block').show();$("#edit-district-id").hide()}});$("#edit-subregion-id-select").bind('change',function(){$("#edit-district-id").hide();var chooseLabel='Wybierz';$select=$("#edit-district-id-select").find('option').remove().end();$select.append('<option value="" class="chooselabel">'+chooseLabel+'</option>');var districts=thiz.getDistricts($(this).val());for(i in districts)$select.append('<option value="'+districts[i]['id']+'">'+districts[i]['name']+' </option>');if(districts.length>0)$("#edit-district-id").show();$select.trigger('modified')})},initCategories:function(){var thiz=this,$form=thiz.$form;thiz.options={};thiz.options.width=900;thiz.options.type='ajax';thiz.options.padding='7';thiz.options.scrolling='no';thiz.options.autoScale=false;thiz.options.autoDimensions=true;thiz.options.resizeOnWindowResize=thiz.isTouchDevice()?false:true;thiz.options.ajax={type:'POST',url:thiz.$form.data('categoriesAjaxUrl')};thiz.options.titleShow=false;thiz.options.onStart=function(){thiz.options.ajax.data=$form.serialize()};thiz.options.onComplete=function(){$('#fancybox-content').addClass('adding moreLevels');thiz.$form.find('input[name="data[suggested_categories][]"]').remove();$('.suggested-category').each(function(){thiz.$form.append("<input type='hidden' name='data[suggested_categories][]' value='"+$(this).data('category')+"'>")})};thiz.options.onClosed=function(){$('body').removeClass('overh').removeAttr('scroll');if($('#categories').find('.caticon').is(':visible')){$('.catSelector3 .dropdown').remove();$('#choose-category-ilu').remove();$('#choose-category-button').css('display','inline-block')}};$('.catSelector3 .dropdown').mousedown(function(e){e.preventDefault()});$('.catSelector3 .dropdown').focus(function(e){e.preventDefault();$('.catSelector3 .dropdown').click()});$fancyElements=$('.catSelector3 .dropdown, #choose-category-ilu');if($fancyElements.length)$fancyElements.fancybox(thiz.options);$fancyElements=$('#choose-category-button');if($fancyElements.length)$fancyElements.fancybox(thiz.options);this.initAdditionalParams();this.offeringLabel='Oferuję';this.seekingLabel='Poszukuję';$(document).on('click touchstart','a.icon-link-other',function(){$('a.suggested').closest('li').remove();$('a.icon-link-main').closest('li').removeClass('hidden').show()});$(document).on('click touchstart','a.icon-link',function(){$('#best-matching-categories, #other-categories').remove();var categoryID=$(this).data('category');if(thiz.hasCategoryChildren(categoryID)==0){thiz.setBredcrumbHtml(thiz.getCategoriesBreadcrumb(categoryID));thiz.setCategoryIcon(categoryID);thiz.setCategoryID(categoryID,false);thiz.toggleOfferSeek(categoryID);thiz.togglePrivateBusiness(categoryID);thiz.showAdditionalParams('');if(window.module_courier)thiz.checkCourierAvailability(categoryID);$.fancybox.close()}else{if(!$(this).hasClass('icon-link-main')){$('#icons-placeholder li').not('#icon-template').remove();$('#icons-placeholder .categoryTitle').hide();var parent=thiz.getCategoryParents(categoryID).pop();$('#category-'+parent).css('display','block').addClass('selected').tinyscrollbar()}else{$('#category-0').removeClass('hidden');$('#category-0').tinyscrollbar();$('#categoryTitleForIcons').text(categoriesJSON[categoryID]['name'])};$('.hiddencat:visible a, #category-0 a').each(function(){if($(this).data('category')==categoryID)$(this).click()});if($('#category-0').find('.selected').offset().top-$('#category-0').find('.viewport').offset().top>$('#category-0').find('.viewport').height()-$('#category-0').find('.selected').height())$('#category-0').find('.viewport').animate({scrollTop:$('#category-0').find('.selected').offset().top},1)};return false});$(document).on('click touchstart','a.choosecatPrev',function(){$(this).addClass('hidden');$('#category-0').show();$('div.hiddencat:visible:last').addClass('4th-level-div').hide();$('a.choosecatNext').removeClass('hidden');$('.choosecat .box > div[id^="category"]').removeClass('firstcolumn');$('.choosecat .box > div[id^="category"]:visible:first').addClass('firstcolumn')});$(document).on('click touchstart','a.choosecatNext',function(){$(this).addClass('hidden');$('#category-0').hide();$('div.4th-level-div').show().removeClass('4th-level-div');$('div.1st-level-div').removeClass('1st-level-div');$('a.choosecatPrev').removeClass('hidden');$('.choosecat .box > div[id^="category"]').removeClass('firstcolumn');$('.choosecat .box > div[id^="category"]:visible:first').addClass('firstcolumn')});$(document).on('click touchstart','a.suggested-category',function(){thiz.actualCategory=$(this).data('category');thiz.$form.find('input[name="data[suggested_category]"]').remove();thiz.$form.append("<input type='hidden' name='data[suggested_category]' value='"+thiz.actualCategory+"'>");thiz.toggleMaxPhotos(thiz.actualCategory)});$(document).on('click touchstart','a.icon-list',function(){$('#best-matching-categories').remove();thiz.actualCategory=$(this).data('category');if(thiz.hasCategoryChildren(thiz.actualCategory)==0){$.fancybox.close();thiz.setBredcrumbHtml(thiz.getCategoriesBreadcrumb(thiz.actualCategory));thiz.setCategoryIcon(thiz.actualCategory);thiz.setCategoryID(thiz.actualCategory,false);thiz.toggleOfferSeek(thiz.actualCategory);thiz.togglePrivateBusiness(thiz.actualCategory);thiz.showAdditionalParams('');thiz.toggleMaxPhotos(thiz.actualCategory);if(window.module_courier)thiz.checkCourierAvailability(thiz.actualCategory);return false};$('a.choosecatNext, a.choosecatPrev').addClass('hidden');var parentsLists=thiz.getCategoryParents($(this).data('category'));$('.hiddencat:visible').each(function(){if(jQuery.inArray($(this).data('category'),parentsLists)<0){$(this).hide().css({display:'none'});$(this).find('a.selected').removeClass('selected')}});$('#icons-placeholder li').not('#icon-template').remove();$('#icons-placeholder .categoryTitle').hide();var parents=thiz.getCategoryParents(thiz.actualCategory);if(parents.length>=3&&thiz.hasCategoryChildren(thiz.actualCategory)!=0){$('#category-0').hide();$('a.choosecatPrev').removeClass('hidden');$('div.hiddencat:visible:first').addClass('1st-level-div')}else $('#category-0').show();$('.choosecat .box > div[id^="category"]').removeClass('firstcolumn');$('.choosecat .box > div[id^="category"]:visible:first').addClass('firstcolumn');var parentID=parents.pop();$('.empty-category').remove();var $clonedEmpty=$('#category-0').clone().attr('id','empty-cateogry').addClass('empty-category').removeClass('selected firstcolumn');$clonedEmpty.find('.categoryTitle').html("").end().find('li').remove().end().find('.scrollbar').remove();$('#category-'+parentID).addClass('selected').after($('#category-'+thiz.actualCategory));if($(this).hasClass('icon-list-main'))$('#category-'+thiz.actualCategory).after($clonedEmpty);$('#category-'+thiz.actualCategory).css('display','block').removeClass('selected').tinyscrollbar();$(this).closest('ul').find('a.selected').removeClass('selected');$(this).addClass('selected');return false});if(selectedCatId=parseInt($('#category-container').val())){thiz.actualCategory=selectedCatId;adding.toggleMaxPhotos(selectedCatId)}},getTimestamp:function(){return Math.round(new Date().getTime()/1e3)},initPhotos:function(){var thiz=this;if(this.getRiakKey())if($('li.with-photo:visible').length<=0)this.setRiakKey('');$('ul.photos-show-mini').sortable({cursor:"move",items:"> li.with-photo",tolerance:"pointer",distance:5,cancel:".delete-photo-a,rotate-photo-a",stop:function(event,ui){thiz.sendActualSlots();thiz.flagFirstImage()}});$('ul.photos-show-mini, ul.photos-show-mini li').disableSelection();$('#show-gallery-html').click(function(){$('#gallery-html').show().find('div.htmlbutton:hidden').each(function(){var $this=$(this);if(!$this.hasClass('disabled'))$this.show().removeClass('hidden')});$('#gallery').hide();thiz.$form.find('input[name="data[gallery_html]"]').val("1");return false});$(document).on('click','.delete-photo-a',function(){thiz.removePhoto($(this).attr('rel'),true);return false});$('#gallery-html a.removeAttachment').click(function(){var $this=$(this),input_id=$this.attr('rel');$('input[name="image['+input_id+']"]').val('');$this.hide()});$('#gallery-html a.removeAttachmentUploaded').click(function(){var $this=$(this);thiz.removePhoto($this.attr('rel'),true);$this.removeClass('removeAttachmentUploaded').addClass('removeAttachment');return false});$(document).on('click','.rotate-photo-a',function(){thiz.rotatePhoto($(this).attr('rel'));return false})
function startUploader(up){var uploading=false;for(var i in thiz.uploaders){var uploader=thiz.uploaders[i];if(uploader.state==plupload.UPLOADING)uploading=true};if(uploading){window.setTimeout(function(){startUploader(up)},300)}else up.start()}
function clearTheQueue(up){var toDelete=up.files.slice(0);for(var i in toDelete)up.removeFile(toDelete[i])};if(jQuery.browser.msie==true&&parseInt(jQuery.browser.version)<=9){$('#show-gallery-html').click()}else for(var i=1;i<=thiz.maxUploadedFiles;i++){if(!$('#add-file-'+i).length)continue;var resizeParameters={width:1080,height:720,quality:80},uploader=new plupload.Uploader({runtimes:'html5,flash',drop_element:'gallery',browse_button:'add-file-'+i,max_file_size:thiz.getMaxFileSize()+'mb',url:upload_url,unique_names:true,resize:resizeParameters,flash_swf_url:flash_url,filters:[{title:'Pliki zdjęć',extensions:"jpg,jpeg,gif,png"}],container:'gallery'});uploader.bind('FilesAdded',function(up,files){$(".field--photos").addClass("slot-in-use");thiz.showProgress(files);window.setTimeout(function(){startUploader(up);useExternalScripts&&xt_click(this,'F','','adding_newphoto')},100)});uploader.bind('FileUploaded',function(up,file,response){if(response.status!=undefined&&parseInt(response.status)!=200||response.response==undefined){alert('Błąd podczas ładowania zdjęcia');return};data=jQuery.parseJSON(response.response);if(data.status=='error'){thiz.showErrorMessage(data.message);thiz.removeProgressBar();if(thiz.getFreeFileCount()<=0){up.stop();clearTheQueue(up)};return};$('#show-gallery-li').hide();thiz.setRiakKey(data.riak_key);if(thiz.getFreeFileCount()>0){thiz.showPhoto(data.slot,data.url,file.id);thiz.decrementFreeFiles()};if(thiz.getFreeFileCount()<=0)for(i in thiz.uploaders){var uploader=thiz.uploaders[i];uploader.stop();clearTheQueue(uploader)};if(thiz.getMaxFileCount()-thiz.getFreeFileCount()>=2)$("#gallery").find(".tip").show()});uploader.bind('BeforeUpload',function(up,file){up.settings.url=upload_url+'?riak_key='+thiz.getRiakKey()+'&ad_id='+thiz.getAdID()+'&preview='+preview_id+'&category='+thiz.actualCategory});uploader.bind('Error',function(up,error,file){if(error.code!=undefined){if(error.code==plupload.INIT_ERROR){$('#show-gallery-html').click()}else if(error.code==plupload.FILE_SIZE_ERROR){thiz.removeProgressBar();thiz.showErrorMessage('Zbyt duży rozmiar pliku. Maksimum to 5MB')}else if(error.code==plupload.FILE_EXTENSION_ERROR){thiz.removeProgressBar();thiz.showErrorMessage('Nieprawidłowy format pliku. Akceptowane formaty: .jpg, .jpeg, .png, .gif')}else{thiz.removeProgressBar();thiz.showErrorMessage('Błąd podczas ładowania zdjęcia')}}else{thiz.removeProgressBar();thiz.showErrorMessage('Błąd podczas ładowania zdjęcia')}});uploader.bind('Init',function(up,params){window.setInterval(function(){up.refresh()},650)});uploader.init();this.uploaders.push(uploader)};var $visibleSlots=$('#gallery').find('li.with-photo:visible');$visibleSlots.each(function(){thiz.decrementFreeFiles()});if(thiz.$form.find('input[name="data[gallery_html]"]').val()=="1")$('#show-gallery-html').click();if($visibleSlots.length){$(".field--photos").addClass("slot-in-use");if($visibleSlots.length>1)$(".field--photos").find(".tip").show()}},showPhoto:function(id,url,fileID){var thiz=this,$img=$('<img id=img_'+id+' src="'+url+'" class="hidden"/>').load(function(){var $empty=thiz.removeProgressBar(),$liHTML=$('#with-photo-template').clone();if($empty.length){$liHTML.data('slot',id);$empty.data('slot',id);$liHTML.attr('id','add-img-'+id).removeClass('hidden').find('img').attr({src:url,id:'img_'+id});$liHTML.find('a.delete-photo-a').attr('rel',id).end().find('a.rotate-photo-a').attr('rel',id);$empty.hide().after($liHTML)};thiz.sendActualSlots();thiz.flagFirstImage()});$('body').append($img);$('#first-photo-suggest').addClass('hidden');$('#second-photo-suggest').removeClass('hidden')},removeProgressBar:function(){var $first=$('#gallery').find('li.progress:visible:first'),$empty=$first.prev('li.empty:not(visible)');$empty.show();$first.remove();return $empty},showProgress:function(ids){for(var i=0;i<ids.length;i++){var $first=$('#gallery').find('li.empty:visible:not(.progress):first');if($first.length){var $liHTML=$('#progress-loader').clone().attr('id','add-progress-'+$first.data('slot')).removeClass('hidden');$liHTML.data('slot',$first.data('slot'));$liHTML.data('fileId',ids[i].id);$first.hide().after($liHTML)}}},getAdID:function(){return $('#adID').val()},setRiakKey:function(id){$('#riakKey').val(id)},getRiakKey:function(){return $('#riakKey').val()},removePhoto:function(id,sendRequest){for(i in thiz.uploaders){var uploader=thiz.uploaders[i];if(uploader.state==plupload.UPLOADING){alert('Trwa ładowanie zdjęć');return false}};if(window.edit_ad!=undefined&&window.photosCount&&this.removeConfirmation==false){var answer=confirm('Zmiany w zdjęciach zostaną zachowane. Kontynuować?');if(!answer){return false}else this.removeConfirmation=true};$('#add-img-'+id).remove();this.incrementFreeFiles();sendRequest&&$.post(upload_removeimage_url+'?preview='+preview_id,{riak_key:this.getRiakKey(),ad_id:this.getAdID(),slot:id},function(){});var $placeholder=$('#add-file-'+id);$('#gallery').find('li.empty:not(:visible)').each(function(){if($(this).data('slot')==id)$placeholder=$(this)});if(!$placeholder.hasClass('disabled'))$placeholder.show();$('ul.photos-show-mini').append($placeholder);this.flagFirstImage();if(this.getFreeFileCount()==this.getMaxFileCount())$('#show-gallery-li').show();var $htmlbutton=$('#htmlbutton_'+id);$htmlbutton.children('.alternativeImageUploaded').remove();$htmlbutton.children('.removeAttachmentUploaded').hide().removeClass('removeAttachmentUploaded').addClass('removeAttachment');$htmlbutton.children('input[type=file]').removeAttr('disabled').removeClass('hidden').append();$('#simple_form_inputs').append($htmlbutton);if(this.getFreeFileCount()==this.getMaxFileCount()){$(".field--photos").removeClass("slot-in-use");$(".field--photos").find(".tip").hide()};return false},rotatePhoto:function(id){$.post(upload_rotate_url+'?preview='+preview_id,{riak_key:this.getRiakKey(),slot:id,ad_id:this.getAdID(),category_id:this.actualCategory},function(data){$('#img_'+id).attr('src',data.url)});return false},flagFirstImage:function(){$('#gallery').find('li.empty, li.with-photo').removeClass('first-child');$('#gallery').find('li.empty:first, li.with-photo:visible:not(.progress):first').addClass('first-child')},incrementFreeFiles:function(){if(--this.actualUploadedFiles<0)this.actualUploadedFiles=0},decrementFreeFiles:function(){this.actualUploadedFiles++;if(this.actualUploadedFiles>this.getMaxFileCount())this.actualUploadedFiles=this.getMaxFileCount()},getMaxFileCount:function(){return this.maxUploadedFiles},getFreeFileCount:function(){return this.maxUploadedFiles-this.actualUploadedFiles},sendActualSlots:function(){var thiz=this,slots=new Array();$('#gallery').find('li.with-photo').each(function(){slots.push($(this).data('slot'))});$.post(upload_order_url+'?preview='+preview_id,{riak_key:$('#riakKey').val(),ad_id:$('#adID').val(),slots:slots,category_id:thiz.actualCategory})},sortObjectsByName:function(a,b){if(typeof a.display_order!='undefined'){if(a.display_order==b.display_order){return a.name.localeCompare(b.name)}else return parseInt(a.display_order)>parseInt(b.display_order)?1:-1}else return a.name.localeCompare(b.name)},initEditContactMap:function(){var Map=this.editContactMap={initialized:false,init:function(){var thiz=this,defaultLat=$('#default-lat').val(),defaultLng=$('#default-lng').val();if(defaultLat&&defaultLng){this.initMap(new google.maps.LatLng(defaultLat,defaultLng))}else this.tune(function(results,status){if(status==google.maps.GeocoderStatus.OK){var place=results[0];thiz.initMap(new google.maps.LatLng(place.geometry.location.lat(),place.geometry.location.lng()))}})},initMap:function(center){this.getMapContainer().show();this.map=new google.maps.Map(this.getMapContainer().get(0),{center:center,mapTypeId:google.maps.MapTypeId.ROADMAP,zoom:parseInt($('#default-zoom').val())||8,scrollwheel:true,streetViewControl:false});this.marker=new google.maps.Marker({map:this.map,draggable:true,animation:google.maps.Animation.DROP,position:center,icon:thiz.getDefaultMarkerIcon()});var thiz=this;google.maps.event.addListener(this.marker,"dragend",function(event){$('input[name="default[lat]"]').val(event.latLng.lat());$('input[name="default[lng]"]').val(event.latLng.lng());$('input[name="default[zoom]"]').val(thiz.map.getZoom());thiz.marker.setIcon(thiz.getDefaultMarkerIcon())});google.maps.event.addListener(this.map,"zoom_changed",function(event){$('input[name="default[zoom]"]').val(thiz.map.getZoom())});this.initialized=true},getMapContainer:function(){return $('#contactDataMap')},getSubregion:function(id){return subregionsJSON[id]!==null?subregionsJSON[id]:null},tune:function(fn){var thiz=this,address=$('input[name="default[map_address]"]').val(),subregion=this.getSubregion($("#edit-subregion-id-select").val());if(!subregion)return;if(!this.initialized)fn=function(results,status){if(status==google.maps.GeocoderStatus.OK){var place=results[0],position=new google.maps.LatLng(place.geometry.location.lat(),place.geometry.location.lng());thiz.initMap(position)}};var geocoder=new google.maps.Geocoder(),bounds=new google.maps.LatLngBounds(new google.maps.LatLng(subregion.lat,subregion.lon),new google.maps.LatLng(subregion.lat,subregion.lon)),query=[];if(address)query.push(address);if(subregion)query.push(subregion.name);var question={address:query.join(','),location:new google.maps.LatLng(subregion.lat,subregion.lon),bounds:bounds};geocoder.geocode(question,fn||function(results,status){if(status==google.maps.GeocoderStatus.OK){var place=results[0],position=new google.maps.LatLng(place.geometry.location.lat(),place.geometry.location.lng());thiz.map.setCenter(position);thiz.marker.setPosition(position);$('input[name="default[lat]"]').val(place.geometry.location.lat());$('input[name="default[lng]"]').val(place.geometry.location.lng());$('input[name="default[zoom]"]').val(thiz.map.getZoom())}})}};$("#edit-subregion-id-select").change(function(){Map.tune()});$('input[name="default[map_address]"]').keyup(function(){setTimeout(function(){Map.tune()},1e3)})},getMaxFileSize:function(){return 5},initCategorySelector:function(){var $select=$('#mainCategorySelect');$select.change(function(){document.location.href=$("option:selected",this).data('url')});$('#subCategorySelect').change(function(){if(($(this).val())==null){document.location.href=$("#mainCategorySelect option:selected").data('url')}else document.location.href=$("option:selected",this).data('url')})},initUploadPhotosButton:function(){var $gallery=$('.gallery .photos-show-mini');$('.gallery a.om-button-upload').click(function(){$gallery.find('li[class!="with-photo"] a span').first().trigger('click')})},initHideManyCheckboxes:function(){if(!"HideManyCheckboxes"in window)return;$("[data-show-more]").each(function(){var hideMany=HideManyCheckboxes();hideMany.init(this);$(this).data("hideMany",hideMany)})},initToggleAdditionalGroups:function(){if(!"ToggleAdditionalGroups"in window)return;ToggleAdditionalGroups.init()}});$(function(){if(typeof AddingClass!='undefined'){adding=new AddingClass();adding.initToExtend()}});if(!window['googleLT_']){window['googleLT_']=(new Date()).getTime();}if (!window['google']) {
window['google'] = {};
}
if (!window['google']['loader']) {
window['google']['loader'] = {};
google.loader.ServiceBase = 'https://www.google.com/uds';
google.loader.GoogleApisBase = 'https://ajax.googleapis.com/ajax';
google.loader.ApiKey = 'notsupplied';
google.loader.KeyVerified = true;
google.loader.LoadFailure = false;
google.loader.Secure = true;
google.loader.GoogleLocale = 'www.google.com';
google.loader.ClientLocation = {"latitude":52.417,"longitude":16.883,"address":{"city":"Poznan","region":"Greater Poland","country":"Poland","country_code":"PL"}};
google.loader.AdditionalParams = '';
(function() {var d=encodeURIComponent,g=window,h=document;function l(a,b){return a.load=b}var m="push",n="replace",q="charAt",r="indexOf",t="ServiceBase",u="name",v="getTime",w="length",x="prototype",y="setTimeout",z="loader",A="substring",B="join",C="toLowerCase";function D(a){return a in E?E[a]:E[a]=-1!=navigator.userAgent[C]()[r](a)}var E={};function F(a,b){var c=function(){};c.prototype=b[x];a.U=b[x];a.prototype=new c}
function G(a,b,c){var e=Array[x].slice.call(arguments,2)||[];return function(){return a.apply(b,e.concat(Array[x].slice.call(arguments)))}}function H(a){a=Error(a);a.toString=function(){return this.message};return a}function I(a,b){for(var c=a.split(/\./),e=g,f=0;f<c[w]-1;f++)e[c[f]]||(e[c[f]]={}),e=e[c[f]];e[c[c[w]-1]]=b}function J(a,b,c){a[b]=c}if(!K)var K=I;if(!L)var L=J;google[z].v={};K("google.loader.callbacks",google[z].v);var M={},N={};google[z].eval={};K("google.loader.eval",google[z].eval);
l(google,function(a,b,c){function e(a){var b=a.split(".");if(2<b[w])throw H("Module: '"+a+"' not found!");"undefined"!=typeof b[1]&&(f=b[0],c.packages=c.packages||[],c.packages[m](b[1]))}var f=a;c=c||{};if(a instanceof Array||a&&"object"==typeof a&&"function"==typeof a[B]&&"function"==typeof a.reverse)for(var k=0;k<a[w];k++)e(a[k]);else e(a);if(a=M[":"+f]){c&&!c.language&&c.locale&&(c.language=c.locale);c&&"string"==typeof c.callback&&(k=c.callback,k.match(/^[[\]A-Za-z0-9._]+$/)&&(k=g.eval(k),c.callback=
k));if((k=c&&null!=c.callback)&&!a.s(b))throw H("Module: '"+f+"' must be loaded before DOM onLoad!");k?a.m(b,c)?g[y](c.callback,0):a.load(b,c):a.m(b,c)||a.load(b,c)}else throw H("Module: '"+f+"' not found!");});K("google.load",google.load);
google.T=function(a,b){b?(0==O[w]&&(P(g,"load",Q),!D("msie")&&!D("safari")&&!D("konqueror")&&D("mozilla")||g.opera?g.addEventListener("DOMContentLoaded",Q,!1):D("msie")?h.write("<script defer onreadystatechange='google.loader.domReady()' src=//:>\x3c/script>"):(D("safari")||D("konqueror"))&&g[y](S,10)),O[m](a)):P(g,"load",a)};K("google.setOnLoadCallback",google.T);
function P(a,b,c){if(a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent)a.attachEvent("on"+b,c);else{var e=a["on"+b];a["on"+b]=null!=e?aa([c,e]):c}}function aa(a){return function(){for(var b=0;b<a[w];b++)a[b]()}}var O=[];google[z].P=function(){var a=g.event.srcElement;"complete"==a.readyState&&(a.onreadystatechange=null,a.parentNode.removeChild(a),Q())};K("google.loader.domReady",google[z].P);var ba={loaded:!0,complete:!0};function S(){ba[h.readyState]?Q():0<O[w]&&g[y](S,10)}
function Q(){for(var a=0;a<O[w];a++)O[a]();O.length=0}google[z].d=function(a,b,c){if(c){var e;"script"==a?(e=h.createElement("script"),e.type="text/javascript",e.src=b):"css"==a&&(e=h.createElement("link"),e.type="text/css",e.href=b,e.rel="stylesheet");(a=h.getElementsByTagName("head")[0])||(a=h.body.parentNode.appendChild(h.createElement("head")));a.appendChild(e)}else"script"==a?h.write('<script src="'+b+'" type="text/javascript">\x3c/script>'):"css"==a&&h.write('<link href="'+b+'" type="text/css" rel="stylesheet"></link>')};
K("google.loader.writeLoadTag",google[z].d);google[z].Q=function(a){N=a};K("google.loader.rfm",google[z].Q);google[z].S=function(a){for(var b in a)"string"==typeof b&&b&&":"==b[q](0)&&!M[b]&&(M[b]=new T(b[A](1),a[b]))};K("google.loader.rpl",google[z].S);google[z].R=function(a){if((a=a.specs)&&a[w])for(var b=0;b<a[w];++b){var c=a[b];"string"==typeof c?M[":"+c]=new U(c):(c=new V(c[u],c.baseSpec,c.customSpecs),M[":"+c[u]]=c)}};K("google.loader.rm",google[z].R);google[z].loaded=function(a){M[":"+a.module].l(a)};
K("google.loader.loaded",google[z].loaded);google[z].O=function(){return"qid="+((new Date)[v]().toString(16)+Math.floor(1E7*Math.random()).toString(16))};K("google.loader.createGuidArg_",google[z].O);I("google_exportSymbol",I);I("google_exportProperty",J);google[z].a={};K("google.loader.themes",google[z].a);google[z].a.I="//www.google.com/cse/style/look/bubblegum.css";L(google[z].a,"BUBBLEGUM",google[z].a.I);google[z].a.K="//www.google.com/cse/style/look/greensky.css";L(google[z].a,"GREENSKY",google[z].a.K);
google[z].a.J="//www.google.com/cse/style/look/espresso.css";L(google[z].a,"ESPRESSO",google[z].a.J);google[z].a.M="//www.google.com/cse/style/look/shiny.css";L(google[z].a,"SHINY",google[z].a.M);google[z].a.L="//www.google.com/cse/style/look/minimalist.css";L(google[z].a,"MINIMALIST",google[z].a.L);google[z].a.N="//www.google.com/cse/style/look/v2/default.css";L(google[z].a,"V2_DEFAULT",google[z].a.N);function U(a){this.b=a;this.o=[];this.n={};this.e={};this.f={};this.j=!0;this.c=-1}
U[x].g=function(a,b){var c="";void 0!=b&&(void 0!=b.language&&(c+="&hl="+d(b.language)),void 0!=b.nocss&&(c+="&output="+d("nocss="+b.nocss)),void 0!=b.nooldnames&&(c+="&nooldnames="+d(b.nooldnames)),void 0!=b.packages&&(c+="&packages="+d(b.packages)),null!=b.callback&&(c+="&async=2"),void 0!=b.style&&(c+="&style="+d(b.style)),void 0!=b.noexp&&(c+="&noexp=true"),void 0!=b.other_params&&(c+="&"+b.other_params));if(!this.j){google[this.b]&&google[this.b].JSHash&&(c+="&sig="+d(google[this.b].JSHash));
var e=[],f;for(f in this.n)":"==f[q](0)&&e[m](f[A](1));for(f in this.e)":"==f[q](0)&&this.e[f]&&e[m](f[A](1));c+="&have="+d(e[B](","))}return google[z][t]+"/?file="+this.b+"&v="+a+google[z].AdditionalParams+c};U[x].t=function(a){var b=null;a&&(b=a.packages);var c=null;if(b)if("string"==typeof b)c=[a.packages];else if(b[w])for(c=[],a=0;a<b[w];a++)"string"==typeof b[a]&&c[m](b[a][n](/^\s*|\s*$/,"")[C]());c||(c=["default"]);b=[];for(a=0;a<c[w];a++)this.n[":"+c[a]]||b[m](c[a]);return b};
l(U[x],function(a,b){var c=this.t(b),e=b&&null!=b.callback;if(e)var f=new W(b.callback);for(var k=[],p=c[w]-1;0<=p;p--){var s=c[p];e&&f.B(s);if(this.e[":"+s])c.splice(p,1),e&&this.f[":"+s][m](f);else k[m](s)}if(c[w]){b&&b.packages&&(b.packages=c.sort()[B](","));for(p=0;p<k[w];p++)s=k[p],this.f[":"+s]=[],e&&this.f[":"+s][m](f);if(b||null==N[":"+this.b]||null==N[":"+this.b].versions[":"+a]||google[z].AdditionalParams||!this.j)b&&b.autoloaded||google[z].d("script",this.g(a,b),e);else{c=N[":"+this.b];
google[this.b]=google[this.b]||{};for(var R in c.properties)R&&":"==R[q](0)&&(google[this.b][R[A](1)]=c.properties[R]);google[z].d("script",google[z][t]+c.path+c.js,e);c.css&&google[z].d("css",google[z][t]+c.path+c.css,e)}this.j&&(this.j=!1,this.c=(new Date)[v](),1!=this.c%100&&(this.c=-1));for(p=0;p<k[w];p++)s=k[p],this.e[":"+s]=!0}});
U[x].l=function(a){-1!=this.c&&(X("al_"+this.b,"jl."+((new Date)[v]()-this.c),!0),this.c=-1);this.o=this.o.concat(a.components);google[z][this.b]||(google[z][this.b]={});google[z][this.b].packages=this.o.slice(0);for(var b=0;b<a.components[w];b++){this.n[":"+a.components[b]]=!0;this.e[":"+a.components[b]]=!1;var c=this.f[":"+a.components[b]];if(c){for(var e=0;e<c[w];e++)c[e].C(a.components[b]);delete this.f[":"+a.components[b]]}}};U[x].m=function(a,b){return 0==this.t(b)[w]};U[x].s=function(){return!0};
function W(a){this.F=a;this.q={};this.r=0}W[x].B=function(a){this.r++;this.q[":"+a]=!0};W[x].C=function(a){this.q[":"+a]&&(this.q[":"+a]=!1,this.r--,0==this.r&&g[y](this.F,0))};function V(a,b,c){this.name=a;this.D=b;this.p=c;this.u=this.h=!1;this.k=[];google[z].v[this[u]]=G(this.l,this)}F(V,U);l(V[x],function(a,b){var c=b&&null!=b.callback;c?(this.k[m](b.callback),b.callback="google.loader.callbacks."+this[u]):this.h=!0;b&&b.autoloaded||google[z].d("script",this.g(a,b),c)});V[x].m=function(a,b){return b&&null!=b.callback?this.u:this.h};V[x].l=function(){this.u=!0;for(var a=0;a<this.k[w];a++)g[y](this.k[a],0);this.k=[]};
var Y=function(a,b){return a.string?d(a.string)+"="+d(b):a.regex?b[n](/(^.*$)/,a.regex):""};V[x].g=function(a,b){return this.G(this.w(a),a,b)};
V[x].G=function(a,b,c){var e="";a.key&&(e+="&"+Y(a.key,google[z].ApiKey));a.version&&(e+="&"+Y(a.version,b));b=google[z].Secure&&a.ssl?a.ssl:a.uri;if(null!=c)for(var f in c)a.params[f]?e+="&"+Y(a.params[f],c[f]):"other_params"==f?e+="&"+c[f]:"base_domain"==f&&(b="http://"+c[f]+a.uri[A](a.uri[r]("/",7)));google[this[u]]={};-1==b[r]("?")&&e&&(e="?"+e[A](1));return b+e};V[x].s=function(a){return this.w(a).deferred};V[x].w=function(a){if(this.p)for(var b=0;b<this.p[w];++b){var c=this.p[b];if(RegExp(c.pattern).test(a))return c}return this.D};function T(a,b){this.b=a;this.i=b;this.h=!1}F(T,U);l(T[x],function(a,b){this.h=!0;google[z].d("script",this.g(a,b),!1)});T[x].m=function(){return this.h};T[x].l=function(){};T[x].g=function(a,b){if(!this.i.versions[":"+a]){if(this.i.aliases){var c=this.i.aliases[":"+a];c&&(a=c)}if(!this.i.versions[":"+a])throw H("Module: '"+this.b+"' with version '"+a+"' not found!");}return google[z].GoogleApisBase+"/libs/"+this.b+"/"+a+"/"+this.i.versions[":"+a][b&&b.uncompressed?"uncompressed":"compressed"]};
T[x].s=function(){return!1};var ca=!1,Z=[],da=(new Date)[v](),fa=function(){ca||(P(g,"unload",ea),ca=!0)},ga=function(a,b){fa();if(!(google[z].Secure||google[z].Options&&!1!==google[z].Options.csi)){for(var c=0;c<a[w];c++)a[c]=d(a[c][C]()[n](/[^a-z0-9_.]+/g,"_"));for(c=0;c<b[w];c++)b[c]=d(b[c][C]()[n](/[^a-z0-9_.]+/g,"_"));g[y](G($,null,"//gg.google.com/csi?s=uds&v=2&action="+a[B](",")+"&it="+b[B](",")),1E4)}},X=function(a,b,c){c?ga([a],[b]):(fa(),Z[m]("r"+Z[w]+"="+d(a+(b?"|"+b:""))),g[y](ea,5<Z[w]?0:15E3))},ea=function(){if(Z[w]){var a=
google[z][t];0==a[r]("http:")&&(a=a[n](/^http:/,"https:"));$(a+"/stats?"+Z[B]("&")+"&nc="+(new Date)[v]()+"_"+((new Date)[v]()-da));Z.length=0}},$=function(a){var b=new Image,c=$.H++;$.A[c]=b;b.onload=b.onerror=function(){delete $.A[c]};b.src=a;b=null};$.A={};$.H=0;I("google.loader.recordCsiStat",ga);I("google.loader.recordStat",X);I("google.loader.createImageForLogging",$);

}) ();google.loader.rm({"specs":["feeds","spreadsheets","gdata","visualization",{"name":"sharing","baseSpec":{"uri":"http://www.google.com/s2/sharing/js","ssl":null,"key":{"string":"key"},"version":{"string":"v"},"deferred":false,"params":{"language":{"string":"hl"}}}},"search","orkut","ads","elements",{"name":"books","baseSpec":{"uri":"http://books.google.com/books/api.js","ssl":"https://encrypted.google.com/books/api.js","key":{"string":"key"},"version":{"string":"v"},"deferred":true,"params":{"callback":{"string":"callback"},"language":{"string":"hl"}}}},{"name":"friendconnect","baseSpec":{"uri":"http://www.google.com/friendconnect/script/friendconnect.js","ssl":"https://www.google.com/friendconnect/script/friendconnect.js","key":{"string":"key"},"version":{"string":"v"},"deferred":false,"params":{}}},"identitytoolkit","ima",{"name":"maps","baseSpec":{"uri":"http://maps.google.com/maps?file\u003dgoogleapi","ssl":"https://maps-api-ssl.google.com/maps?file\u003dgoogleapi","key":{"string":"key"},"version":{"string":"v"},"deferred":true,"params":{"callback":{"regex":"callback\u003d$1\u0026async\u003d2"},"language":{"string":"hl"}}},"customSpecs":[{"uri":"http://maps.googleapis.com/maps/api/js","ssl":"https://maps.googleapis.com/maps/api/js","version":{"string":"v"},"deferred":true,"params":{"callback":{"string":"callback"},"language":{"string":"hl"}},"pattern":"^(3|3..*)$"}]},"payments","wave","annotations_v2","earth","language",{"name":"annotations","baseSpec":{"uri":"http://www.google.com/reviews/scripts/annotations_bootstrap.js","ssl":null,"key":{"string":"key"},"version":{"string":"v"},"deferred":true,"params":{"callback":{"string":"callback"},"language":{"string":"hl"},"country":{"string":"gl"}}}},"picker"]});
google.loader.rfm({":search":{"versions":{":1":"1",":1.0":"1"},"path":"/api/search/1.0/ee93f9aae9c9e9dba5eea831d506e69a/","js":"default+pl.I.js","css":"default+pl.css","properties":{":JSHash":"ee93f9aae9c9e9dba5eea831d506e69a",":NoOldNames":false,":Version":"1.0"}},":language":{"versions":{":1":"1",":1.0":"1"},"path":"/api/language/1.0/aa67524fe978e85d12a837b6f572142f/","js":"default+pl.I.js","properties":{":JSHash":"aa67524fe978e85d12a837b6f572142f",":Version":"1.0"}},":feeds":{"versions":{":1":"1",":1.0":"1"},"path":"/api/feeds/1.0/482f2817cdf8982edf2e5669f9e3a627/","js":"default+pl.I.js","css":"default+pl.css","properties":{":JSHash":"482f2817cdf8982edf2e5669f9e3a627",":Version":"1.0"}},":spreadsheets":{"versions":{":0":"1",":0.4":"1"},"path":"/api/spreadsheets/0.4/87ff7219e9f8a8164006cbf28d5e911a/","js":"default.I.js","properties":{":JSHash":"87ff7219e9f8a8164006cbf28d5e911a",":Version":"0.4"}},":ima":{"versions":{":3":"1",":3.0":"1"},"path":"/api/ima/3.0/28a914332232c9a8ac0ae8da68b1006e/","js":"default.I.js","properties":{":JSHash":"28a914332232c9a8ac0ae8da68b1006e",":Version":"3.0"}},":wave":{"versions":{":1":"1",":1.0":"1"},"path":"/api/wave/1.0/3b6f7573ff78da6602dda5e09c9025bf/","js":"default.I.js","properties":{":JSHash":"3b6f7573ff78da6602dda5e09c9025bf",":Version":"1.0"}},":annotations":{"versions":{":1":"1",":1.0":"1"},"path":"/api/annotations/1.0/bacce7b6155a1bbadda3c05d65391b22/","js":"default+pl.I.js","properties":{":JSHash":"bacce7b6155a1bbadda3c05d65391b22",":Version":"1.0"}},":earth":{"versions":{":1":"1",":1.0":"1"},"path":"/api/earth/1.0/db22e5693e0a8de1f62f3536f5a8d7d3/","js":"default.I.js","properties":{":JSHash":"db22e5693e0a8de1f62f3536f5a8d7d3",":Version":"1.0"}},":picker":{"versions":{":1":"1",":1.0":"1"},"path":"/api/picker/1.0/1c635e91b9d0c082c660a42091913907/","js":"default.I.js","css":"default.css","properties":{":JSHash":"1c635e91b9d0c082c660a42091913907",":Version":"1.0"}}});
google.loader.rpl({":scriptaculous":{"versions":{":1.8.3":{"uncompressed":"scriptaculous.js","compressed":"scriptaculous.js"},":1.9.0":{"uncompressed":"scriptaculous.js","compressed":"scriptaculous.js"},":1.8.2":{"uncompressed":"scriptaculous.js","compressed":"scriptaculous.js"},":1.8.1":{"uncompressed":"scriptaculous.js","compressed":"scriptaculous.js"}},"aliases":{":1.8":"1.8.3",":1":"1.9.0",":1.9":"1.9.0"}},":yui":{"versions":{":2.6.0":{"uncompressed":"build/yuiloader/yuiloader.js","compressed":"build/yuiloader/yuiloader-min.js"},":2.9.0":{"uncompressed":"build/yuiloader/yuiloader.js","compressed":"build/yuiloader/yuiloader-min.js"},":2.7.0":{"uncompressed":"build/yuiloader/yuiloader.js","compressed":"build/yuiloader/yuiloader-min.js"},":2.8.0r4":{"uncompressed":"build/yuiloader/yuiloader.js","compressed":"build/yuiloader/yuiloader-min.js"},":2.8.2r1":{"uncompressed":"build/yuiloader/yuiloader.js","compressed":"build/yuiloader/yuiloader-min.js"},":2.8.1":{"uncompressed":"build/yuiloader/yuiloader.js","compressed":"build/yuiloader/yuiloader-min.js"},":3.3.0":{"uncompressed":"build/yui/yui.js","compressed":"build/yui/yui-min.js"}},"aliases":{":3":"3.3.0",":2":"2.9.0",":2.7":"2.7.0",":2.8.2":"2.8.2r1",":2.6":"2.6.0",":2.9":"2.9.0",":2.8":"2.8.2r1",":2.8.0":"2.8.0r4",":3.3":"3.3.0"}},":swfobject":{"versions":{":2.1":{"uncompressed":"swfobject_src.js","compressed":"swfobject.js"},":2.2":{"uncompressed":"swfobject_src.js","compressed":"swfobject.js"}},"aliases":{":2":"2.2"}},":webfont":{"versions":{":1.0.28":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.27":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.29":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.12":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.13":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.14":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.15":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.10":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.11":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.2":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.1":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.0":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.6":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.19":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.5":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.18":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.4":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.17":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.3":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.16":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.9":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.21":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.22":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.25":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.26":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.23":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.24":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"}},"aliases":{":1":"1.0.29",":1.0":"1.0.29"}},":ext-core":{"versions":{":3.1.0":{"uncompressed":"ext-core-debug.js","compressed":"ext-core.js"},":3.0.0":{"uncompressed":"ext-core-debug.js","compressed":"ext-core.js"}},"aliases":{":3":"3.1.0",":3.0":"3.0.0",":3.1":"3.1.0"}},":mootools":{"versions":{":1.3.1":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.1.1":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.3.0":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.3.2":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.1.2":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.2.3":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.2.4":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.2.1":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.2.2":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.2.5":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.4.0":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.4.1":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.4.2":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"}},"aliases":{":1":"1.1.2",":1.11":"1.1.1",":1.4":"1.4.2",":1.3":"1.3.2",":1.2":"1.2.5",":1.1":"1.1.2"}},":jqueryui":{"versions":{":1.8.0":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.2":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.1":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.15":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.14":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.13":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.12":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.11":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.10":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.17":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.16":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.6.0":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.9":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.7":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.8":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.7.2":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.5":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.7.3":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.6":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.7.0":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.7.1":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.4":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.5.3":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.5.2":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"}},"aliases":{":1.8":"1.8.17",":1.7":"1.7.3",":1.6":"1.6.0",":1":"1.8.17",":1.5":"1.5.3",":1.8.3":"1.8.4"}},":chrome-frame":{"versions":{":1.0.2":{"uncompressed":"CFInstall.js","compressed":"CFInstall.min.js"},":1.0.1":{"uncompressed":"CFInstall.js","compressed":"CFInstall.min.js"},":1.0.0":{"uncompressed":"CFInstall.js","compressed":"CFInstall.min.js"}},"aliases":{":1":"1.0.2",":1.0":"1.0.2"}},":jquery":{"versions":{":1.6.2":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.3.1":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.6.1":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.3.0":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.6.4":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.6.3":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.3.2":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.6.0":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.2.3":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.7.0":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.7.1":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.2.6":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.4.3":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.4.4":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.5.1":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.5.0":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.4.0":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.5.2":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.4.1":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.4.2":{"uncompressed":"jquery.js","compressed":"jquery.min.js"}},"aliases":{":1.7":"1.7.1",":1.6":"1.6.4",":1":"1.7.1",":1.5":"1.5.2",":1.4":"1.4.4",":1.3":"1.3.2",":1.2":"1.2.6"}},":dojo":{"versions":{":1.3.1":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.3.0":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.6.1":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.1.1":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.3.2":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.6.0":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.2.3":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.7.2":{"uncompressed":"dojo/dojo.js.uncompressed.js","compressed":"dojo/dojo.js"},":1.7.0":{"uncompressed":"dojo/dojo.js.uncompressed.js","compressed":"dojo/dojo.js"},":1.7.1":{"uncompressed":"dojo/dojo.js.uncompressed.js","compressed":"dojo/dojo.js"},":1.4.3":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.5.1":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.5.0":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.2.0":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.4.0":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.4.1":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"}},"aliases":{":1.7":"1.7.2",":1":"1.6.1",":1.6":"1.6.1",":1.5":"1.5.1",":1.4":"1.4.3",":1.3":"1.3.2",":1.2":"1.2.3",":1.1":"1.1.1"}},":prototype":{"versions":{":1.7.0.0":{"uncompressed":"prototype.js","compressed":"prototype.js"},":1.6.0.2":{"uncompressed":"prototype.js","compressed":"prototype.js"},":1.6.1.0":{"uncompressed":"prototype.js","compressed":"prototype.js"},":1.6.0.3":{"uncompressed":"prototype.js","compressed":"prototype.js"}},"aliases":{":1.7":"1.7.0.0",":1.6.1":"1.6.1.0",":1":"1.7.0.0",":1.6":"1.6.1.0",":1.7.0":"1.7.0.0",":1.6.0":"1.6.0.3"}}});
}
;/*
 * jQuery autoResize (textarea auto-resizer)
 * @copyright James Padolsey http://james.padolsey.com
 * @version 1.04
 */

(function(a){a.fn.autoResize=function(j){var b=a.extend({onResize:function(){},animate:true,animateDuration:150,animateCallback:function(){},extraSpace:20,limit:1000},j);this.filter('textarea').each(function(){var c=a(this).css({resize:'none','overflow-y':'hidden'}),k=c.height(),f=(function(){var l=['height','width','lineHeight','textDecoration','letterSpacing'],h={};a.each(l,function(d,e){h[e]=c.css(e)});return c.clone().removeAttr('id').removeAttr('name').css({position:'absolute',top:0,left:-9999}).css(h).attr('tabIndex','-1').insertBefore(c)})(),i=null,g=function(){f.height(0).val(a(this).val()).scrollTop(10000);var d=Math.max(f.scrollTop(),k)+b.extraSpace,e=a(this).add(f);if(i===d){return}i=d;if(d>=b.limit){a(this).css('overflow-y','');return}b.onResize.call(this);b.animate&&c.css('display')==='block'?e.stop().animate({height:d},b.animateDuration,b.animateCallback):e.height(d)};c.unbind('.dynSiz').bind('keyup.dynSiz',g).bind('keydown.dynSiz',g).bind('change.dynSiz',g)});return this}})(jQuery);;/*
 * jQuery autoResize (textarea auto-resizer)
 * @copyright James Padolsey http://james.padolsey.com
 * @version 1.04
 *
 * cracked by icyleaf <icyleaf.cn@gmail.com>
 * Search and Find the keyword '[NEW ADDED]' for details.
 */

(function($){

    $.fn.autoResize = function(options) {

        // Just some abstracted details,
        // to make plugin users happy:
        var settings = $.extend({
            onResize : function(){},
            animate : true,
            animateDuration : 150,
            animateCallback : function(){},
            extraSpace : 20,
            limit: 0
        }, options);

        // Only textarea's auto-resize:
        this.filter('textarea').each(function(){

            // Get rid of scrollbars and disable WebKit resizing:
            var textarea = $(this).css({resize:'none','overflow-y':'hidden'}),

            // Cache original height, for use later:
                origHeight = textarea.height(),

            // Need clone of textarea, hidden off screen:
                clone = (function(){

                    // Properties which may effect space taken up by chracters:
                    var props = ['height','width','lineHeight','textDecoration','letterSpacing'],
                        propOb = {};

                    // Create object of styles to apply:
                    $.each(props, function(i, prop){
                        propOb[prop] = textarea.css(prop);
                    });

                    // Clone the actual textarea removing unique properties
                    // and insert before original textarea:
                    return textarea.clone().removeAttr('id').removeAttr('name').css({
                        position: 'absolute',
                        top: 0,
                        left: -9999
                    }).css(propOb).attr('tabIndex','-1').insertBefore(textarea);

                })(),
                lastScrollTop = null,
                updateSize = function() {

                    // Prepare the clone:
                    clone.height(0).val($(this).val()).scrollTop(10000);

                    // Find the height of text:
                    var scrollTop = Math.max(clone.scrollTop(), origHeight) + settings.extraSpace,
                        toChange = $(this).add(clone);

                    // Don't do anything if scrollTip hasen't changed:
                    if (lastScrollTop === scrollTop) { return; }
                    lastScrollTop = scrollTop;

                    // Check for limit:
                    if ( scrollTop >= settings.limit ) {
                        // [NEW ADDED]
                        // Do NOT limit height when limit = 0
                        if ( settings.limit != 0) {
                            // Applied limit height
                            $(this).css('overflow-y','').css('height', settings.limit+'px');
                            return;
                        }
                    }
                    // Fire off callback:
                    settings.onResize.call(this);

                    // Either animate or directly apply height:
                    settings.animate && textarea.css('display') === 'block' ?
                        toChange.stop().animate({height:scrollTop}, settings.animateDuration, settings.animateCallback)
                        : toChange.height(scrollTop);
                };

            // Bind namespaced handlers to appropriate events:
            textarea
                .unbind('.dynSiz')
                .bind('keyup.dynSiz', updateSize)
                .bind('keydown.dynSiz', updateSize)
                .bind('change.dynSiz', updateSize);

        });

        // Chain:
        return this;

    };

})(jQuery);;(function(e){function t(t,n){function w(){r.update();S();return r}function E(){var e=d.toLowerCase();f.obj.css(p,v/u.ratio);o.obj.css(p,-v);g.start=f.obj.offset()[p];u.obj.css(e,a[n.axis]);a.obj.css(e,a[n.axis]);f.obj.css(e,f[n.axis])}function S(){if(!y){f.obj.bind("mousedown",x);a.obj.bind("mouseup",N);var e;l.obj.mousedown(function(){b.obj.addClass("noSelect");clearInterval(e);e=setInterval(C,50)}).mouseup(function(){b.obj.removeClass("noSelect");clearInterval(e)});c.obj.mousedown(function(){b.obj.addClass("noSelect");clearInterval(e);e=setInterval(k,50)}).mouseup(function(){b.obj.removeClass("noSelect");clearInterval(e)});l.obj.bind("click",function(){clearInterval(e);C();return false});c.obj.bind("click",function(){clearInterval(e);k();return false})}else{var e;f.obj[0].ontouchstart=function(e){if(1===e.touches.length){x(e.touches[0]);e.stopPropagation()}};l.obj.bind("touchstart",function(){b.obj.addClass("noSelect");clearInterval(e);e=setInterval(C,50)}).bind("touchend",function(){b.obj.removeClass("noSelect");clearInterval(e)});c.obj.bind("touchstart",function(){b.obj.addClass("noSelect");clearInterval(e);e=setInterval(k,50)}).bind("touchend",function(){b.obj.removeClass("noSelect");clearInterval(e)})}if(n.scroll&&window.addEventListener){i[0].addEventListener("DOMMouseScroll",T,false);i[0].addEventListener("mousewheel",T,false)}else if(n.scroll){i[0].onmousewheel=T}}function x(t){e("body").addClass("noSelect");var n=parseInt(f.obj.css(p),10);g.start=h?t.pageX:t.pageY;m.start=n=="auto"?0:n;if(!y){e(document).bind("mousemove",N);e(document).bind("mouseup",L);f.obj.bind("mouseup",L)}else{document.ontouchmove=function(e){e.preventDefault();N(e.touches[0])};document.ontouchend=L}}function T(t){if(o.ratio<1){var r=t||window.event,i=r.wheelDelta?r.wheelDelta/120:-r.detail/3;v-=i*n.wheel;v=Math.min(o[n.axis]-s[n.axis],Math.max(0,v));f.obj.css(p,v/u.ratio);o.obj.css(p,-v);if(n.lockscroll||v!==o[n.axis]-s[n.axis]&&v!==0){r=e.event.fix(r);r.preventDefault()}}}function N(e){if(o.ratio<1){if(n.invertscroll&&y){m.now=Math.min(a[n.axis]-f[n.axis],Math.max(0,m.start+(g.start-(h?e.pageX:e.pageY))))}else{m.now=Math.min(a[n.axis]-f[n.axis],Math.max(0,m.start+((h?e.pageX:e.pageY)-g.start)))}v=m.now*u.ratio;o.obj.css(p,-v);f.obj.css(p,m.now)}}function C(){o.ratio=s[n.axis]/o[n.axis];u.obj.toggleClass("disable",o.ratio>=1);if(v>10){v-=10}else{v=0}E()}function k(){o.ratio=s[n.axis]/o[n.axis];u.obj.toggleClass("disable",o.ratio>=1);iScrollBottom=o.ratio<=1?o[n.axis]-s[n.axis]:isNaN(parseInt(sScroll,10))?v:parseInt(sScroll,10);if(iScrollBottom-v>10){v+=10}else{v=iScrollBottom}E()}function L(){e("body").removeClass("noSelect");e(document).unbind("mousemove",N);e(document).unbind("mouseup",L);f.obj.unbind("mouseup",L);document.ontouchmove=document.ontouchend=null}var r=this,i=t,s={obj:e(".viewport",t)},o={obj:e(".overview",t)},u={obj:e(".scrollbar",t)},a={obj:e(".track",u.obj)},f={obj:e(".thumb",u.obj)},l={obj:e(".scrollbarup",u.obj)},c={obj:e(".scrollbardown",u.obj)},h=n.axis==="x",p=h?"left":"top",d=h?"Width":"Height",v=0,m={start:0,now:0},g={},y="ontouchstart"in document.documentElement,b={obj:e("body")};this.update=function(e){if(n.arrowsInside){u.obj.css("marginTop",18)}s[n.axis]=s.obj[0]["offset"+d]-(n.arrowsInside?36:0);o[n.axis]=o.obj[0]["scroll"+d]-(n.arrowsInside?36:0);o.ratio=s[n.axis]/o[n.axis];u.obj.toggleClass("disable",o.ratio>=1);a[n.axis]=n.size==="auto"?s[n.axis]:n.size;f[n.axis]=Math.min(a[n.axis],Math.max(0,n.sizethumb==="auto"?a[n.axis]*o.ratio:n.sizethumb));u.ratio=n.sizethumb==="auto"?o[n.axis]/a[n.axis]:(o[n.axis]-s[n.axis])/(a[n.axis]-f[n.axis]);v=e==="relative"&&o.ratio<=1?Math.min(o[n.axis]-s[n.axis],Math.max(0,v)):0;v=e==="bottom"&&o.ratio<=1?o[n.axis]-s[n.axis]:isNaN(parseInt(e,10))?v:parseInt(e,10);E()};return w()}e.tiny=e.tiny||{};e.tiny.scrollbar={options:{axis:"y",wheel:40,scroll:true,lockscroll:true,size:"auto",sizethumb:"auto",invertscroll:false,arrowsInside:false}};e.fn.tinyscrollbar=function(n){var r=e.extend({},e.tiny.scrollbar.options,n);this.each(function(){e(this).data("tsb",new t(e(this),r))});return this};e.fn.tinyscrollbar_update=function(t){return e(this).data("tsb").update(t)}})(jQuery);/*1.5.2*/
(function(){var f=0,k=[],m={},i={},a={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},l=/[<>&\"\']/g,b,c=window.setTimeout,d={},e;function h(){this.returnValue=false}function j(){this.cancelBubble=true}(function(n){var o=n.split(/,/),p,r,q;for(p=0;p<o.length;p+=2){q=o[p+1].split(/ /);for(r=0;r<q.length;r++){i[q[r]]=o[p]}}})("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/vnd.rn-realvideo,rv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe");var g={VERSION:"1.5.2",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:i,ua:(function(){var r=navigator,q=r.userAgent,s=r.vendor,o,n,p;o=/WebKit/.test(q);p=o&&s.indexOf("Apple")!==-1;n=window.opera&&window.opera.buildNumber;return{windows:navigator.platform.indexOf("Win")!==-1,ie:!o&&!n&&(/MSIE/gi).test(q)&&(/Explorer/gi).test(r.appName),webkit:o,gecko:!o&&/Gecko/.test(q),safari:p,opera:!!n}}()),typeOf:function(n){return({}).toString.call(n).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},extend:function(n){g.each(arguments,function(o,p){if(p>0){g.each(o,function(r,q){n[q]=r})}});return n},cleanName:function(n){var o,p;p=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(o=0;o<p.length;o+=2){n=n.replace(p[o],p[o+1])}n=n.replace(/\s+/g,"_");n=n.replace(/[^a-z0-9_\-\.]+/gi,"");return n},addRuntime:function(n,o){o.name=n;k[n]=o;k.push(o);return o},guid:function(){var n=new Date().getTime().toString(32),o;for(o=0;o<5;o++){n+=Math.floor(Math.random()*65535).toString(32)}return(g.guidPrefix||"p")+n+(f++).toString(32)},buildUrl:function(o,n){var p="";g.each(n,function(r,q){p+=(p?"&":"")+encodeURIComponent(q)+"="+encodeURIComponent(r)});if(p){o+=(o.indexOf("?")>0?"&":"?")+p}return o},each:function(q,r){var p,o,n;if(q){p=q.length;if(p===b){for(o in q){if(q.hasOwnProperty(o)){if(r(q[o],o)===false){return}}}}else{for(n=0;n<p;n++){if(r(q[n],n)===false){return}}}}},formatSize:function(n){if(n===b||/\D/.test(n)){return g.translate("N/A")}if(n>1073741824){return Math.round(n/1073741824,1)+" GB"}if(n>1048576){return Math.round(n/1048576,1)+" MB"}if(n>1024){return Math.round(n/1024,1)+" KB"}return n+" b"},getPos:function(o,s){var t=0,r=0,v,u=document,p,q;o=o;s=s||u.body;function n(B){var z,A,w=0,C=0;if(B){A=B.getBoundingClientRect();z=u.compatMode==="CSS1Compat"?u.documentElement:u.body;w=A.left+z.scrollLeft;C=A.top+z.scrollTop}return{x:w,y:C}}if(o&&o.getBoundingClientRect&&(navigator.userAgent.indexOf("MSIE")>0&&u.documentMode!==8)){p=n(o);q=n(s);return{x:p.x-q.x,y:p.y-q.y}}v=o;while(v&&v!=s&&v.nodeType){t+=v.offsetLeft||0;r+=v.offsetTop||0;v=v.offsetParent}v=o.parentNode;while(v&&v!=s&&v.nodeType){t-=v.scrollLeft||0;r-=v.scrollTop||0;v=v.parentNode}return{x:t,y:r}},getSize:function(n){return{w:n.offsetWidth||n.clientWidth,h:n.offsetHeight||n.clientHeight}},parseSize:function(n){var o;if(typeof(n)=="string"){n=/^([0-9]+)([mgk]?)$/.exec(n.toLowerCase().replace(/[^0-9mkg]/g,""));o=n[2];n=+n[1];if(o=="g"){n*=1073741824}if(o=="m"){n*=1048576}if(o=="k"){n*=1024}}return n},xmlEncode:function(n){return n?(""+n).replace(l,function(o){return a[o]?"&"+a[o]+";":o}):n},toArray:function(p){var o,n=[];for(o=0;o<p.length;o++){n[o]=p[o]}return n},inArray:function(p,q){if(q){if(Array.prototype.indexOf){return Array.prototype.indexOf.call(q,p)}for(var n=0,o=q.length;n<o;n++){if(q[n]===p){return n}}}return -1},addI18n:function(n){return g.extend(m,n)},translate:function(n){return m[n]||n},isEmptyObj:function(n){if(n===b){return true}for(var o in n){return false}return true},hasClass:function(p,o){var n;if(p.className==""){return false}n=new RegExp("(^|\\s+)"+o+"(\\s+|$)");return n.test(p.className)},addClass:function(o,n){if(!g.hasClass(o,n)){o.className=o.className==""?n:o.className.replace(/\s+$/,"")+" "+n}},removeClass:function(p,o){var n=new RegExp("(^|\\s+)"+o+"(\\s+|$)");p.className=p.className.replace(n,function(r,q,s){return q===" "&&s===" "?" ":""})},getStyle:function(o,n){if(o.currentStyle){return o.currentStyle[n]}else{if(window.getComputedStyle){return window.getComputedStyle(o,null)[n]}}},addEvent:function(s,n,t){var r,q,p,o;o=arguments[3];n=n.toLowerCase();if(e===b){e="Plupload_"+g.guid()}if(s.addEventListener){r=t;s.addEventListener(n,r,false)}else{if(s.attachEvent){r=function(){var u=window.event;if(!u.target){u.target=u.srcElement}u.preventDefault=h;u.stopPropagation=j;t(u)};s.attachEvent("on"+n,r)}}if(s[e]===b){s[e]=g.guid()}if(!d.hasOwnProperty(s[e])){d[s[e]]={}}q=d[s[e]];if(!q.hasOwnProperty(n)){q[n]=[]}q[n].push({func:r,orig:t,key:o})},removeEvent:function(s,n){var q,t,p;if(typeof(arguments[2])=="function"){t=arguments[2]}else{p=arguments[2]}n=n.toLowerCase();if(s[e]&&d[s[e]]&&d[s[e]][n]){q=d[s[e]][n]}else{return}for(var o=q.length-1;o>=0;o--){if(q[o].key===p||q[o].orig===t){if(s.detachEvent){s.detachEvent("on"+n,q[o].func)}else{if(s.removeEventListener){s.removeEventListener(n,q[o].func,false)}}q[o].orig=null;q[o].func=null;q.splice(o,1);if(t!==b){break}}}if(!q.length){delete d[s[e]][n]}if(g.isEmptyObj(d[s[e]])){delete d[s[e]];try{delete s[e]}catch(r){s[e]=b}}},removeAllEvents:function(o){var n=arguments[1];if(o[e]===b||!o[e]){return}g.each(d[o[e]],function(q,p){g.removeEvent(o,p,n)})}};g.Uploader=function(r){var o={},u,t=[],q,p=false;u=new g.QueueProgress();r=g.extend({chunk_size:0,multipart:true,multi_selection:true,file_data_name:"file",filters:[]},r);function s(){var w,x=0,v;if(this.state==g.STARTED){for(v=0;v<t.length;v++){if(!w&&t[v].status==g.QUEUED){w=t[v];w.status=g.UPLOADING;if(this.trigger("BeforeUpload",w)){this.trigger("UploadFile",w)}}else{x++}}if(x==t.length){this.stop();this.trigger("UploadComplete",t)}}}function n(){var w,v;u.reset();for(w=0;w<t.length;w++){v=t[w];if(v.size!==b){u.size+=v.size;u.loaded+=v.loaded}else{u.size=b}if(v.status==g.DONE){u.uploaded++}else{if(v.status==g.FAILED){u.failed++}else{u.queued++}}}if(u.size===b){u.percent=t.length>0?Math.ceil(u.uploaded/t.length*100):0}else{u.bytesPerSec=Math.ceil(u.loaded/((+new Date()-q||1)/1000));u.percent=u.size>0?Math.ceil(u.loaded/u.size*100):0}}g.extend(this,{state:g.STOPPED,runtime:"",features:{},files:t,settings:r,total:u,id:g.guid(),init:function(){var A=this,B,x,w,z=0,y;if(typeof(r.preinit)=="function"){r.preinit(A)}else{g.each(r.preinit,function(D,C){A.bind(C,D)})}r.page_url=r.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/");if(!/^(\w+:\/\/|\/)/.test(r.url)){r.url=r.page_url+r.url}r.chunk_size=g.parseSize(r.chunk_size);r.max_file_size=g.parseSize(r.max_file_size);A.bind("FilesAdded",function(C,F){var E,D,H=0,I,G=r.filters;if(G&&G.length){I=[];g.each(G,function(J){g.each(J.extensions.split(/,/),function(K){if(/^\s*\*\s*$/.test(K)){I.push("\\.*")}else{I.push("\\."+K.replace(new RegExp("["+("/^$.*+?|()[]{}\\".replace(/./g,"\\$&"))+"]","g"),"\\$&"))}})});I=new RegExp(I.join("|")+"$","i")}for(E=0;E<F.length;E++){D=F[E];D.loaded=0;D.percent=0;D.status=g.QUEUED;if(I&&!I.test(D.name)){C.trigger("Error",{code:g.FILE_EXTENSION_ERROR,message:g.translate("File extension error."),file:D});continue}if(D.size!==b&&D.size>r.max_file_size){C.trigger("Error",{code:g.FILE_SIZE_ERROR,message:g.translate("File size error."),file:D});continue}t.push(D);H++}if(H){c(function(){A.trigger("QueueChanged");A.refresh()},1)}else{return false}});if(r.unique_names){A.bind("UploadFile",function(C,D){var F=D.name.match(/\.([^.]+)$/),E="tmp";if(F){E=F[1]}D.target_name=D.id+"."+E})}A.bind("UploadProgress",function(C,D){D.percent=D.size>0?Math.ceil(D.loaded/D.size*100):100;n()});A.bind("StateChanged",function(C){if(C.state==g.STARTED){q=(+new Date())}else{if(C.state==g.STOPPED){for(B=C.files.length-1;B>=0;B--){if(C.files[B].status==g.UPLOADING){C.files[B].status=g.QUEUED;n()}}}}});A.bind("QueueChanged",n);A.bind("Error",function(C,D){if(D.file){D.file.status=g.FAILED;n();if(C.state==g.STARTED){c(function(){s.call(A)},1)}}});A.bind("FileUploaded",function(C,D){D.status=g.DONE;D.loaded=D.size;C.trigger("UploadProgress",D);c(function(){s.call(A)},1)});if(r.runtimes){x=[];y=r.runtimes.split(/\s?,\s?/);for(B=0;B<y.length;B++){if(k[y[B]]){x.push(k[y[B]])}}}else{x=k}function v(){var F=x[z++],E,C,D;if(F){E=F.getFeatures();C=A.settings.required_features;if(C){C=C.split(",");for(D=0;D<C.length;D++){if(!E[C[D]]){v();return}}}F.init(A,function(G){if(G&&G.success){A.features=E;A.runtime=F.name;A.trigger("Init",{runtime:F.name});A.trigger("PostInit");A.refresh()}else{v()}})}else{A.trigger("Error",{code:g.INIT_ERROR,message:g.translate("Init error.")})}}v();if(typeof(r.init)=="function"){r.init(A)}else{g.each(r.init,function(D,C){A.bind(C,D)})}},refresh:function(){this.trigger("Refresh")},start:function(){if(this.state!=g.STARTED){this.state=g.STARTED;this.trigger("StateChanged");s.call(this)}},stop:function(){if(this.state!=g.STOPPED){this.state=g.STOPPED;this.trigger("CancelUpload");this.trigger("StateChanged")}},disableBrowse:function(){p=arguments[0]!==b?arguments[0]:true;this.trigger("DisableBrowse",p)},getFile:function(w){var v;for(v=t.length-1;v>=0;v--){if(t[v].id===w){return t[v]}}},removeFile:function(w){var v;for(v=t.length-1;v>=0;v--){if(t[v].id===w.id){return this.splice(v,1)[0]}}},splice:function(x,v){var w;w=t.splice(x===b?0:x,v===b?t.length:v);this.trigger("FilesRemoved",w);this.trigger("QueueChanged");return w},trigger:function(w){var y=o[w.toLowerCase()],x,v;if(y){v=Array.prototype.slice.call(arguments);v[0]=this;for(x=0;x<y.length;x++){if(y[x].func.apply(y[x].scope,v)===false){return false}}}return true},hasEventListener:function(v){return !!o[v.toLowerCase()]},bind:function(v,x,w){var y;v=v.toLowerCase();y=o[v]||[];y.push({func:x,scope:w||this});o[v]=y},unbind:function(v){v=v.toLowerCase();var y=o[v],w,x=arguments[1];if(y){if(x!==b){for(w=y.length-1;w>=0;w--){if(y[w].func===x){y.splice(w,1);break}}}else{y=[]}if(!y.length){delete o[v]}}},unbindAll:function(){var v=this;g.each(o,function(x,w){v.unbind(w)})},destroy:function(){this.stop();this.trigger("Destroy");this.unbindAll()}})};g.File=function(q,o,p){var n=this;n.id=q;n.name=o;n.size=p;n.loaded=0;n.percent=0;n.status=0};g.Runtime=function(){this.getFeatures=function(){};this.init=function(n,o){}};g.QueueProgress=function(){var n=this;n.size=0;n.loaded=0;n.uploaded=0;n.failed=0;n.queued=0;n.percent=0;n.bytesPerSec=0;n.reset=function(){n.size=n.loaded=n.uploaded=n.failed=n.queued=n.percent=n.bytesPerSec=0}};g.runtimes={};window.plupload=g})();;(function(h,k,j,e){var c={},g;function m(o,p){var n;if("FileReader" in h){n=new FileReader();n.readAsDataURL(o);n.onload=function(){p(n.result)}}else{return p(o.getAsDataURL())}}function l(o,p){var n;if("FileReader" in h){n=new FileReader();n.readAsBinaryString(o);n.onload=function(){p(n.result)}}else{return p(o.getAsBinary())}}function d(r,p,n,v){var q,o,u,s,t=this;m(c[r.id],function(w){q=k.createElement("canvas");q.style.display="none";k.body.appendChild(q);o=q.getContext("2d");u=new Image();u.onerror=u.onabort=function(){v({success:false})};u.onload=function(){var B,x,z,y,A;if(!p.width){p.width=u.width}if(!p.height){p.height=u.height}s=Math.min(p.width/u.width,p.height/u.height);if(s<1||(s===1&&n==="image/jpeg")){B=Math.round(u.width*s);x=Math.round(u.height*s);q.width=B;q.height=x;o.drawImage(u,0,0,B,x);if(n==="image/jpeg"){y=new f(atob(w.substring(w.indexOf("base64,")+7)));if(y.headers&&y.headers.length){A=new a();if(A.init(y.get("exif")[0])){A.setExif("PixelXDimension",B);A.setExif("PixelYDimension",x);y.set("exif",A.getBinary());if(t.hasEventListener("ExifData")){t.trigger("ExifData",r,A.EXIF())}if(t.hasEventListener("GpsData")){t.trigger("GpsData",r,A.GPS())}}}if(p.quality){try{w=q.toDataURL(n,p.quality/100)}catch(C){w=q.toDataURL(n)}}}else{w=q.toDataURL(n)}w=w.substring(w.indexOf("base64,")+7);w=atob(w);if(y&&y.headers&&y.headers.length){w=y.restore(w);y.purge()}q.parentNode.removeChild(q);v({success:true,data:w})}else{v({success:false})}};u.src=w})}j.runtimes.Html5=j.addRuntime("html5",{getFeatures:function(){var s,o,r,q,p,n;o=r=p=n=false;if(h.XMLHttpRequest){s=new XMLHttpRequest();r=!!s.upload;o=!!(s.sendAsBinary||s.upload)}if(o){q=!!(s.sendAsBinary||(h.Uint8Array&&h.ArrayBuffer));p=!!(File&&(File.prototype.getAsDataURL||h.FileReader)&&q);n=!!(File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice))}g=j.ua.safari&&j.ua.windows;return{html5:o,dragdrop:(function(){var t=k.createElement("div");return("draggable" in t)||("ondragstart" in t&&"ondrop" in t)}()),jpgresize:p,pngresize:p,multipart:p||!!h.FileReader||!!h.FormData,canSendBinary:q,cantSendBlobInFormData:!!(j.ua.gecko&&h.FormData&&h.FileReader&&!FileReader.prototype.readAsArrayBuffer),progress:r,chunks:n,multi_selection:!(j.ua.safari&&j.ua.windows),triggerDialog:(j.ua.gecko&&h.FormData||j.ua.webkit)}},init:function(p,r){var n,q;function o(w){var u,t,v=[],x,s={};for(t=0;t<w.length;t++){u=w[t];if(s[u.name]){continue}s[u.name]=true;x=j.guid();c[x]=u;v.push(new j.File(x,u.fileName||u.name,u.fileSize||u.size))}if(v.length){p.trigger("FilesAdded",v)}}n=this.getFeatures();if(!n.html5){r({success:false});return}p.bind("Init",function(w){var G,F,C=[],v,D,t=w.settings.filters,u,B,s=k.body,E;G=k.createElement("div");G.id=w.id+"_html5_container";j.extend(G.style,{position:"absolute",background:p.settings.shim_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",zIndex:99999,opacity:p.settings.shim_bgcolor?"":0});G.className="plupload html5";if(p.settings.container){s=k.getElementById(p.settings.container);if(j.getStyle(s,"position")==="static"){s.style.position="relative"}}s.appendChild(G);no_type_restriction:for(v=0;v<t.length;v++){u=t[v].extensions.split(/,/);for(D=0;D<u.length;D++){if(u[D]==="*"){C=[];break no_type_restriction}B=j.mimeTypes[u[D]];if(B&&j.inArray(B,C)===-1){C.push(B)}}}G.innerHTML='<input id="'+p.id+'_html5"  style="font-size:999px" type="file" accept="'+C.join(",")+'" '+(p.settings.multi_selection&&p.features.multi_selection?'multiple="multiple"':"")+" />";G.scrollTop=100;E=k.getElementById(p.id+"_html5");if(w.features.triggerDialog){j.extend(E.style,{position:"absolute",width:"100%",height:"100%"})}else{j.extend(E.style,{cssFloat:"right",styleFloat:"right"})}E.onchange=function(){o(this.files);this.value=""};F=k.getElementById(w.settings.browse_button);if(F){var z=w.settings.browse_button_hover,A=w.settings.browse_button_active,x=w.features.triggerDialog?F:G;if(z){j.addEvent(x,"mouseover",function(){j.addClass(F,z)},w.id);j.addEvent(x,"mouseout",function(){j.removeClass(F,z)},w.id)}if(A){j.addEvent(x,"mousedown",function(){j.addClass(F,A)},w.id);j.addEvent(k.body,"mouseup",function(){j.removeClass(F,A)},w.id)}if(w.features.triggerDialog){j.addEvent(F,"click",function(H){var y=k.getElementById(w.id+"_html5");if(y&&!y.disabled){y.click()}H.preventDefault()},w.id)}}});p.bind("PostInit",function(){var s=k.getElementById(p.settings.drop_element);if(s){if(g){j.addEvent(s,"dragenter",function(w){var v,t,u;v=k.getElementById(p.id+"_drop");if(!v){v=k.createElement("input");v.setAttribute("type","file");v.setAttribute("id",p.id+"_drop");v.setAttribute("multiple","multiple");j.addEvent(v,"change",function(){o(this.files);j.removeEvent(v,"change",p.id);v.parentNode.removeChild(v)},p.id);s.appendChild(v)}t=j.getPos(s,k.getElementById(p.settings.container));u=j.getSize(s);if(j.getStyle(s,"position")==="static"){j.extend(s.style,{position:"relative"})}j.extend(v.style,{position:"absolute",display:"block",top:0,left:0,width:u.w+"px",height:u.h+"px",opacity:0})},p.id);return}j.addEvent(s,"dragover",function(t){t.preventDefault()},p.id);j.addEvent(s,"drop",function(u){var t=u.dataTransfer;if(t&&t.files){o(t.files)}u.preventDefault()},p.id)}});p.bind("Refresh",function(s){var t,u,v,x,w;t=k.getElementById(p.settings.browse_button);if(t){u=j.getPos(t,k.getElementById(s.settings.container));v=j.getSize(t);x=k.getElementById(p.id+"_html5_container");j.extend(x.style,{top:u.y+"px",left:u.x+"px",width:v.w+"px",height:v.h+"px"});if(p.features.triggerDialog){if(j.getStyle(t,"position")==="static"){j.extend(t.style,{position:"relative"})}w=parseInt(j.getStyle(t,"z-index"),10);if(isNaN(w)){w=0}j.extend(t.style,{zIndex:w});j.extend(x.style,{zIndex:w-1})}}});p.bind("DisableBrowse",function(s,u){var t=k.getElementById(s.id+"_html5");if(t){t.disabled=u}});p.bind("CancelUpload",function(){if(q.abort){q.abort()}});p.bind("UploadFile",function(s,u){var v=s.settings,y,t;function x(A,D,z){var B;if(File.prototype.slice){try{A.slice();return A.slice(D,z)}catch(C){return A.slice(D,z-D)}}else{if(B=File.prototype.webkitSlice||File.prototype.mozSlice){return B.call(A,D,z)}else{return null}}}function w(A){var D=0,C=0,z=("FileReader" in h)?new FileReader:null;function B(){var I,M,K,L,H,J,F,E=s.settings.url;function G(V){var T=0,N="----pluploadboundary"+j.guid(),O,P="--",U="\r\n",R="";q=new XMLHttpRequest;if(q.upload){q.upload.onprogress=function(W){u.loaded=Math.min(u.size,C+W.loaded-T);s.trigger("UploadProgress",u)}}q.onreadystatechange=function(){var W,Y;if(q.readyState==4&&s.state!==j.STOPPED){try{W=q.status}catch(X){W=0}if(W>=400){s.trigger("Error",{code:j.HTTP_ERROR,message:j.translate("HTTP Error."),file:u,status:W})}else{if(K){Y={chunk:D,chunks:K,response:q.responseText,status:W};s.trigger("ChunkUploaded",u,Y);C+=J;if(Y.cancelled){u.status=j.FAILED;return}u.loaded=Math.min(u.size,(D+1)*H)}else{u.loaded=u.size}s.trigger("UploadProgress",u);V=I=O=R=null;if(!K||++D>=K){u.status=j.DONE;s.trigger("FileUploaded",u,{response:q.responseText,status:W})}else{B()}}}};if(s.settings.multipart&&n.multipart){L.name=u.target_name||u.name;q.open("post",E,true);j.each(s.settings.headers,function(X,W){q.setRequestHeader(W,X)});if(typeof(V)!=="string"&&!!h.FormData){O=new FormData();j.each(j.extend(L,s.settings.multipart_params),function(X,W){O.append(W,X)});O.append(s.settings.file_data_name,V);q.send(O);return}if(typeof(V)==="string"){q.setRequestHeader("Content-Type","multipart/form-data; boundary="+N);j.each(j.extend(L,s.settings.multipart_params),function(X,W){R+=P+N+U+'Content-Disposition: form-data; name="'+W+'"'+U+U;R+=unescape(encodeURIComponent(X))+U});F=j.mimeTypes[u.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream";R+=P+N+U+'Content-Disposition: form-data; name="'+s.settings.file_data_name+'"; filename="'+unescape(encodeURIComponent(u.name))+'"'+U+"Content-Type: "+F+U+U+V+U+P+N+P+U;T=R.length-V.length;V=R;if(q.sendAsBinary){q.sendAsBinary(V)}else{if(n.canSendBinary){var S=new Uint8Array(V.length);for(var Q=0;Q<V.length;Q++){S[Q]=(V.charCodeAt(Q)&255)}q.send(S.buffer)}}return}}E=j.buildUrl(s.settings.url,j.extend(L,s.settings.multipart_params));q.open("post",E,true);q.setRequestHeader("Content-Type","application/octet-stream");j.each(s.settings.headers,function(X,W){q.setRequestHeader(W,X)});q.send(V)}if(u.status==j.DONE||u.status==j.FAILED||s.state==j.STOPPED){return}L={name:u.target_name||u.name};if(v.chunk_size&&u.size>v.chunk_size&&(n.chunks||typeof(A)=="string")){H=v.chunk_size;K=Math.ceil(u.size/H);J=Math.min(H,u.size-(D*H));if(typeof(A)=="string"){I=A.substring(D*H,D*H+J)}else{I=x(A,D*H,D*H+J)}L.chunk=D;L.chunks=K}else{J=u.size;I=A}if(s.settings.multipart&&n.multipart&&typeof(I)!=="string"&&z&&n.cantSendBlobInFormData&&n.chunks&&s.settings.chunk_size){z.onload=function(){G(z.result)};z.readAsBinaryString(I)}else{G(I)}}B()}y=c[u.id];if(n.jpgresize&&s.settings.resize&&/\.(png|jpg|jpeg)$/i.test(u.name)){d.call(s,u,s.settings.resize,/\.png$/i.test(u.name)?"image/png":"image/jpeg",function(z){if(z.success){u.size=z.data.length;w(z.data)}else{if(n.chunks){w(y)}else{l(y,w)}}})}else{if(!n.chunks&&n.jpgresize){l(y,w)}else{w(y)}}});p.bind("Destroy",function(s){var u,v,t=k.body,w={inputContainer:s.id+"_html5_container",inputFile:s.id+"_html5",browseButton:s.settings.browse_button,dropElm:s.settings.drop_element};for(u in w){v=k.getElementById(w[u]);if(v){j.removeAllEvents(v,s.id)}}j.removeAllEvents(k.body,s.id);if(s.settings.container){t=k.getElementById(s.settings.container)}t.removeChild(k.getElementById(w.inputContainer))});r({success:true})}});function b(){var q=false,o;function r(t,v){var s=q?0:-8*(v-1),w=0,u;for(u=0;u<v;u++){w|=(o.charCodeAt(t+u)<<Math.abs(s+u*8))}return w}function n(u,s,t){var t=arguments.length===3?t:o.length-s-1;o=o.substr(0,s)+u+o.substr(t+s)}function p(t,u,w){var x="",s=q?0:-8*(w-1),v;for(v=0;v<w;v++){x+=String.fromCharCode((u>>Math.abs(s+v*8))&255)}n(x,t,w)}return{II:function(s){if(s===e){return q}else{q=s}},init:function(s){q=false;o=s},SEGMENT:function(s,u,t){switch(arguments.length){case 1:return o.substr(s,o.length-s-1);case 2:return o.substr(s,u);case 3:n(t,s,u);break;default:return o}},BYTE:function(s){return r(s,1)},SHORT:function(s){return r(s,2)},LONG:function(s,t){if(t===e){return r(s,4)}else{p(s,t,4)}},SLONG:function(s){var t=r(s,4);return(t>2147483647?t-4294967296:t)},STRING:function(s,t){var u="";for(t+=s;s<t;s++){u+=String.fromCharCode(r(s,1))}return u}}}function f(s){var u={65505:{app:"EXIF",name:"APP1",signature:"Exif\0"},65506:{app:"ICC",name:"APP2",signature:"ICC_PROFILE\0"},65517:{app:"IPTC",name:"APP13",signature:"Photoshop 3.0\0"}},t=[],r,n,p=e,q=0,o;r=new b();r.init(s);if(r.SHORT(0)!==65496){return}n=2;o=Math.min(1048576,s.length);while(n<=o){p=r.SHORT(n);if(p>=65488&&p<=65495){n+=2;continue}if(p===65498||p===65497){break}q=r.SHORT(n+2)+2;if(u[p]&&r.STRING(n+4,u[p].signature.length)===u[p].signature){t.push({hex:p,app:u[p].app.toUpperCase(),name:u[p].name.toUpperCase(),start:n,length:q,segment:r.SEGMENT(n,q)})}n+=q}r.init(null);return{headers:t,restore:function(y){r.init(y);var w=new f(y);if(!w.headers){return false}for(var x=w.headers.length;x>0;x--){var z=w.headers[x-1];r.SEGMENT(z.start,z.length,"")}w.purge();n=r.SHORT(2)==65504?4+r.SHORT(4):2;for(var x=0,v=t.length;x<v;x++){r.SEGMENT(n,0,t[x].segment);n+=t[x].length}return r.SEGMENT()},get:function(x){var y=[];for(var w=0,v=t.length;w<v;w++){if(t[w].app===x.toUpperCase()){y.push(t[w].segment)}}return y},set:function(y,x){var z=[];if(typeof(x)==="string"){z.push(x)}else{z=x}for(var w=ii=0,v=t.length;w<v;w++){if(t[w].app===y.toUpperCase()){t[w].segment=z[ii];t[w].length=z[ii].length;ii++}if(ii>=z.length){break}}},purge:function(){t=[];r.init(null)}}}function a(){var q,n,o={},t;q=new b();n={tiff:{274:"Orientation",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}};t={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}};function p(u,C){var w=q.SHORT(u),z,F,G,B,A,v,x,D,E=[],y={};for(z=0;z<w;z++){x=v=u+12*z+2;G=C[q.SHORT(x)];if(G===e){continue}B=q.SHORT(x+=2);A=q.LONG(x+=2);x+=4;E=[];switch(B){case 1:case 7:if(A>4){x=q.LONG(x)+o.tiffHeader}for(F=0;F<A;F++){E[F]=q.BYTE(x+F)}break;case 2:if(A>4){x=q.LONG(x)+o.tiffHeader}y[G]=q.STRING(x,A-1);continue;case 3:if(A>2){x=q.LONG(x)+o.tiffHeader}for(F=0;F<A;F++){E[F]=q.SHORT(x+F*2)}break;case 4:if(A>1){x=q.LONG(x)+o.tiffHeader}for(F=0;F<A;F++){E[F]=q.LONG(x+F*4)}break;case 5:x=q.LONG(x)+o.tiffHeader;for(F=0;F<A;F++){E[F]=q.LONG(x+F*4)/q.LONG(x+F*4+4)}break;case 9:x=q.LONG(x)+o.tiffHeader;for(F=0;F<A;F++){E[F]=q.SLONG(x+F*4)}break;case 10:x=q.LONG(x)+o.tiffHeader;for(F=0;F<A;F++){E[F]=q.SLONG(x+F*4)/q.SLONG(x+F*4+4)}break;default:continue}D=(A==1?E[0]:E);if(t.hasOwnProperty(G)&&typeof D!="object"){y[G]=t[G][D]}else{y[G]=D}}return y}function s(){var v=e,u=o.tiffHeader;q.II(q.SHORT(u)==18761);if(q.SHORT(u+=2)!==42){return false}o.IFD0=o.tiffHeader+q.LONG(u+=2);v=p(o.IFD0,n.tiff);o.exifIFD=("ExifIFDPointer" in v?o.tiffHeader+v.ExifIFDPointer:e);o.gpsIFD=("GPSInfoIFDPointer" in v?o.tiffHeader+v.GPSInfoIFDPointer:e);return true}function r(w,u,z){var B,y,x,A=0;if(typeof(u)==="string"){var v=n[w.toLowerCase()];for(hex in v){if(v[hex]===u){u=hex;break}}}B=o[w.toLowerCase()+"IFD"];y=q.SHORT(B);for(i=0;i<y;i++){x=B+12*i+2;if(q.SHORT(x)==u){A=x+8;break}}if(!A){return false}q.LONG(A,z);return true}return{init:function(u){o={tiffHeader:10};if(u===e||!u.length){return false}q.init(u);if(q.SHORT(0)===65505&&q.STRING(4,5).toUpperCase()==="EXIF\0"){return s()}return false},EXIF:function(){var v;v=p(o.exifIFD,n.exif);if(v.ExifVersion&&j.typeOf(v.ExifVersion)==="array"){for(var w=0,u="";w<v.ExifVersion.length;w++){u+=String.fromCharCode(v.ExifVersion[w])}v.ExifVersion=u}return v},GPS:function(){var u;u=p(o.gpsIFD,n.gps);if(u.GPSVersionID){u.GPSVersionID=u.GPSVersionID.join(".")}return u},setExif:function(u,v){if(u!=="PixelXDimension"&&u!=="PixelYDimension"){return false}return r("exif",u,v)},getBinary:function(){return q.SEGMENT()}}}})(window,document,plupload);;(function(f,b,d,e){var a={},g={};function c(){var h;try{h=navigator.plugins["Shockwave Flash"];h=h.description}catch(j){try{h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(i){h="0.0"}}h=h.match(/\d+/g);return parseFloat(h[0]+"."+h[1])}d.flash={trigger:function(j,h,i){setTimeout(function(){var m=a[j],l,k;if(m){m.trigger("Flash:"+h,i)}},0)}};d.runtimes.Flash=d.addRuntime("flash",{getFeatures:function(){return{jpgresize:true,pngresize:true,maxWidth:8091,maxHeight:8091,chunks:true,progress:true,multipart:true,multi_selection:true}},init:function(m,o){var k,l,h=0,i=b.body;if(c()<10){o({success:false});return}g[m.id]=false;a[m.id]=m;k=b.getElementById(m.settings.browse_button);l=b.createElement("div");l.id=m.id+"_flash_container";d.extend(l.style,{position:"absolute",top:"0px",background:m.settings.shim_bgcolor||"transparent",zIndex:99999,width:"100%",height:"100%"});l.className="plupload flash";if(m.settings.container){i=b.getElementById(m.settings.container);if(d.getStyle(i,"position")==="static"){i.style.position="relative"}}i.appendChild(l);(function(){var p,q;p='<object id="'+m.id+'_flash" type="application/x-shockwave-flash" data="'+m.settings.flash_swf_url+'" ';if(d.ua.ie){p+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '}p+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+m.settings.flash_swf_url+'" /><param name="flashvars" value="id='+escape(m.id)+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>';if(d.ua.ie){q=b.createElement("div");l.appendChild(q);q.outerHTML=p;q=null}else{l.innerHTML=p}}());function n(){return b.getElementById(m.id+"_flash")}function j(){if(h++>5000){o({success:false});return}if(!g[m.id]){setTimeout(j,1)}}j();k=l=null;m.bind("Flash:Init",function(){var q={},p;n().setFileFilters(m.settings.filters,m.settings.multi_selection);if(g[m.id]){return}g[m.id]=true;m.bind("UploadFile",function(r,t){var u=r.settings,s=m.settings.resize||{};n().uploadFile(q[t.id],u.url,{name:t.target_name||t.name,mime:d.mimeTypes[t.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",chunk_size:u.chunk_size,width:s.width,height:s.height,quality:s.quality,multipart:u.multipart,multipart_params:u.multipart_params||{},file_data_name:u.file_data_name,format:/\.(jpg|jpeg)$/i.test(t.name)?"jpg":"png",headers:u.headers,urlstream_upload:u.urlstream_upload})});m.bind("CancelUpload",function(){n().cancelUpload()});m.bind("Flash:UploadProcess",function(s,r){var t=s.getFile(q[r.id]);if(t.status!=d.FAILED){t.loaded=r.loaded;t.size=r.size;s.trigger("UploadProgress",t)}});m.bind("Flash:UploadChunkComplete",function(r,t){var u,s=r.getFile(q[t.id]);u={chunk:t.chunk,chunks:t.chunks,response:t.text};r.trigger("ChunkUploaded",s,u);if(s.status!==d.FAILED&&r.state!==d.STOPPED){n().uploadNextChunk()}if(t.chunk==t.chunks-1){s.status=d.DONE;r.trigger("FileUploaded",s,{response:t.text})}});m.bind("Flash:SelectFiles",function(r,u){var t,s,v=[],w;for(s=0;s<u.length;s++){t=u[s];w=d.guid();q[w]=t.id;q[t.id]=w;v.push(new d.File(w,t.name,t.size))}if(v.length){m.trigger("FilesAdded",v)}});m.bind("Flash:SecurityError",function(r,s){m.trigger("Error",{code:d.SECURITY_ERROR,message:d.translate("Security error."),details:s.message,file:m.getFile(q[s.id])})});m.bind("Flash:GenericError",function(r,s){m.trigger("Error",{code:d.GENERIC_ERROR,message:d.translate("Generic error."),details:s.message,file:m.getFile(q[s.id])})});m.bind("Flash:IOError",function(r,s){m.trigger("Error",{code:d.IO_ERROR,message:d.translate("IO error."),details:s.message,file:m.getFile(q[s.id])})});m.bind("Flash:ImageError",function(r,s){m.trigger("Error",{code:parseInt(s.code,10),message:d.translate("Image error."),file:m.getFile(q[s.id])})});m.bind("Flash:StageEvent:rollOver",function(r){var s,t;s=b.getElementById(m.settings.browse_button);t=r.settings.browse_button_hover;if(s&&t){d.addClass(s,t)}});m.bind("Flash:StageEvent:rollOut",function(r){var s,t;s=b.getElementById(m.settings.browse_button);t=r.settings.browse_button_hover;if(s&&t){d.removeClass(s,t)}});m.bind("Flash:StageEvent:mouseDown",function(r){var s,t;s=b.getElementById(m.settings.browse_button);t=r.settings.browse_button_active;if(s&&t){d.addClass(s,t);d.addEvent(b.body,"mouseup",function(){d.removeClass(s,t)},r.id)}});m.bind("Flash:StageEvent:mouseUp",function(r){var s,t;s=b.getElementById(m.settings.browse_button);t=r.settings.browse_button_active;if(s&&t){d.removeClass(s,t)}});m.bind("Flash:ExifData",function(r,s){m.trigger("ExifData",m.getFile(q[s.id]),s.data)});m.bind("Flash:GpsData",function(r,s){m.trigger("GpsData",m.getFile(q[s.id]),s.data)});m.bind("QueueChanged",function(r){m.refresh()});m.bind("FilesRemoved",function(r,t){var s;for(s=0;s<t.length;s++){n().removeFile(q[t[s].id])}});m.bind("StateChanged",function(r){m.refresh()});m.bind("Refresh",function(r){var s,t,u;n().setFileFilters(m.settings.filters,m.settings.multi_selection);s=b.getElementById(r.settings.browse_button);if(s){t=d.getPos(s,b.getElementById(r.settings.container));u=d.getSize(s);d.extend(b.getElementById(r.id+"_flash_container").style,{top:t.y+"px",left:t.x+"px",width:u.w+"px",height:u.h+"px"})}});m.bind("DisableBrowse",function(r,s){n().disableBrowse(s)});m.bind("Destroy",function(r){var s;d.removeAllEvents(b.body,r.id);delete g[r.id];delete a[r.id];s=b.getElementById(r.id+"_flash_container");if(s){i.removeChild(s)}});o({success:true})})}})})(window,document,plupload);;/*	SWFObject v2.2 <http://code.google.com/p/swfobject/>
	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
*/
var swfobject=function(){var D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,X=!+"\v1",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10);ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof O.ActiveXObject!=D){try{var ad=new ActiveXObject(W);if(ad){ab=ad.GetVariable("$version");if(ab){X=true;ab=ab.split(" ")[1].split(",");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}(),k=function(){if(!M.w3){return}if((typeof j.readyState!=D&&j.readyState=="complete")||(typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))){f()}if(!J){if(typeof j.addEventListener!=D){j.addEventListener("DOMContentLoaded",f,false)}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState=="complete"){j.detachEvent(x,arguments.callee);f()}});if(O==top){(function(){if(J){return}try{j.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}f()})()}}if(M.wk){(function(){if(J){return}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})()}s(f)}}();function f(){if(J){return}try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]()}}function K(X){if(J){X()}else{U[U.length]=X}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener("load",Y,false)}else{if(typeof j.addEventListener!=D){j.addEventListener("load",Y,false)}else{if(typeof O.attachEvent!=D){i(O,"onload",Y)}else{if(typeof O.onload=="function"){var X=O.onload;O.onload=function(){X();Y()}}else{O.onload=Y}}}}}function h(){if(T){V()}else{H()}}function V(){var X=j.getElementsByTagName("body")[0];var aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return}}X.removeChild(aa);Z=null;H()})()}else{H()}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class")){ai.styleclass=ae.getAttribute("class")}if(ae.getAttribute("align")){ai.align=ae.getAttribute("align")}var ah={};var X=ae.getElementsByTagName("param");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute("name").toLowerCase()!="movie"){ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value")}}P(ai,ah,Y,ab)}else{p(ae);if(ab){ab(aa)}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName=="OBJECT"){if(typeof Y.SetVariable!=D){X=Y}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z}}}return X}function A(){return !a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName=="OBJECT"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width="310"}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height="137"}j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?"ActiveX":"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D){ab.flashvars+="&"+ac}else{ab.flashvars=ac}if(M.ie&&M.win&&ae.readyState!=4){var Y=C("div");X+="SWFObjectNew";Y.setAttribute("id",X);ae.parentNode.insertBefore(Y,ae);ae.style.display="none";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae)}else{setTimeout(arguments.callee,10)}})()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(g(Y),Y)}}function g(ab){var aa=C("div");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName=="PARAM")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true))}}}}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X}if(aa){if(typeof ai.id==D){ai.id=Y}if(M.ie&&M.win){var ah="";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()=="data"){ag.movie=ai[ae]}else{if(ae.toLowerCase()=="styleclass"){ah+=' class="'+ai[ae]+'"'}else{if(ae.toLowerCase()!="classid"){ah+=" "+ae+'="'+ai[ae]+'"'}}}}}var af="";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+='<param name="'+ad+'" value="'+ag[ad]+'" />'}}aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>";N[N.length]=ai.id;X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()=="styleclass"){Z.setAttribute("class",ai[ac])}else{if(ac.toLowerCase()!="classid"){Z.setAttribute(ac,ai[ac])}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!="movie"){e(Z,ab,ag[ab])}}aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X);aa.setAttribute("value",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName=="OBJECT"){if(M.ie&&M.win){X.style.display="none";(function(){if(X.readyState==4){b(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]=="function"){Y[X]=null}}Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return}var aa=j.getElementsByTagName("head")[0];if(!aa){return}var X=(ad&&typeof ad=="string")?ad:"screen";if(ab){n=null;G=null}if(!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css");Z.setAttribute("media",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1]}G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y)}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}}}function w(Z,X){if(!m){return}var Y=X?"visible":"hidden";if(J&&c(Z)){c(Z).style.visibility=Y}else{v("#"+Z,"visibility:"+Y)}}function L(Y){var Z=/[\\\"<>\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var d=function(){if(M.ie&&M.win){window.attachEvent("onunload",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2])}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa])}for(var Y in M){M[Y]=null}M=null;for(var X in swfobject){swfobject[X]=null}swfobject=null})}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false)}else{if(Z){Z({success:false,id:ab})}}},getObjectById:function(X){if(M.w3){return z(X)}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+="";ag+="";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al]}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak]}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+="&"+ai+"="+Z[ai]}else{am.flashvars=ai+"="+Z[ai]}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true)}X.success=true;X.ref=an}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return}else{w(ah,true)}}if(ac){ac(X)}})}else{if(ac){ac(X)}}},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X)}else{return undefined}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y)}},removeSWF:function(X){if(M.w3){y(X)}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X)}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z)){Z=Z.split("?")[1]}if(aa==null){return L(Z)}var Y=Z.split("&");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf("="))==aa){return L(Y[X].substring((Y[X].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display="block"}}if(E){E(B)}}a=false}}}}();;/*! jQuery UI - v1.11.4 - 2015-04-29
* http://jqueryui.com
* Includes: core.js, widget.js, mouse.js, sortable.js
* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */

(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)})(function(e){function t(t,s){var n,a,o,r=t.nodeName.toLowerCase();return"area"===r?(n=t.parentNode,a=n.name,t.href&&a&&"map"===n.nodeName.toLowerCase()?(o=e("img[usemap='#"+a+"']")[0],!!o&&i(o)):!1):(/^(input|select|textarea|button|object)$/.test(r)?!t.disabled:"a"===r?t.href||s:s)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var i=this.css("position"),s="absolute"===i,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter(function(){var t=e(this);return s&&"static"===t.css("position")?!1:n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&a.length?a:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var s=e.attr(i,"tabindex"),n=isNaN(s);return(n||s>=0)&&t(i,!n)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function s(t,i,s,a){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var n="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?o["inner"+i].call(this):this.each(function(){e(this).css(a,s(this,t)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?o["outer"+i].call(this,t):this.each(function(){e(this).css(a,s(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,s,n=e(this[0]);n.length&&n[0]!==document;){if(i=n.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(n.css("zIndex"),10),!isNaN(s)&&0!==s))return s;n=n.parent()}return 0}}),e.ui.plugin={add:function(t,i,s){var n,a=e.ui[t].prototype;for(n in s)a.plugins[n]=a.plugins[n]||[],a.plugins[n].push([i,s[n]])},call:function(e,t,i,s){var n,a=e.plugins[t];if(a&&(s||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(n=0;a.length>n;n++)e.options[a[n][0]]&&a[n][1].apply(e.element,i)}};var s=0,n=Array.prototype.slice;e.cleanData=function(t){return function(i){var s,n,a;for(a=0;null!=(n=i[a]);a++)try{s=e._data(n,"events"),s&&s.remove&&e(n).triggerHandler("remove")}catch(o){}t(i)}}(e.cleanData),e.widget=function(t,i,s){var n,a,o,r,h={},l=t.split(".")[0];return t=t.split(".")[1],n=l+"-"+t,s||(s=i,i=e.Widget),e.expr[":"][n.toLowerCase()]=function(t){return!!e.data(t,n)},e[l]=e[l]||{},a=e[l][t],o=e[l][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new o(e,t)},e.extend(o,a,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),r=new i,r.options=e.widget.extend({},r.options),e.each(s,function(t,s){return e.isFunction(s)?(h[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},n=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,a=this._superApply;return this._super=e,this._superApply=n,t=s.apply(this,arguments),this._super=i,this._superApply=a,t}}(),void 0):(h[t]=s,void 0)}),o.prototype=e.widget.extend(r,{widgetEventPrefix:a?r.widgetEventPrefix||t:t},h,{constructor:o,namespace:l,widgetName:t,widgetFullName:n}),a?(e.each(a._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete a._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var i,s,a=n.call(arguments,1),o=0,r=a.length;r>o;o++)for(i in a[o])s=a[o][i],a[o].hasOwnProperty(i)&&void 0!==s&&(t[i]=e.isPlainObject(s)?e.isPlainObject(t[i])?e.widget.extend({},t[i],s):e.widget.extend({},s):s);return t},e.widget.bridge=function(t,i){var s=i.prototype.widgetFullName||t;e.fn[t]=function(a){var o="string"==typeof a,r=n.call(arguments,1),h=this;return o?this.each(function(){var i,n=e.data(this,s);return"instance"===a?(h=n,!1):n?e.isFunction(n[a])&&"_"!==a.charAt(0)?(i=n[a].apply(n,r),i!==n&&void 0!==i?(h=i&&i.jquery?h.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+a+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+a+"'")}):(r.length&&(a=e.widget.extend.apply(null,[a].concat(r))),this.each(function(){var t=e.data(this,s);t?(t.option(a||{}),t._init&&t._init()):e.data(this,s,new i(a,this))})),h}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=s++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var s,n,a,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},s=t.split("."),t=s.shift(),s.length){for(n=o[t]=e.widget.extend({},this.options[t]),a=0;s.length-1>a;a++)n[s[a]]=n[s[a]]||{},n=n[s[a]];if(t=s.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=i}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,s){var n,a=this;"boolean"!=typeof t&&(s=i,i=t,t=!1),s?(i=n=e(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),e.each(s,function(s,o){function r(){return t||a.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?a[o]:o).apply(a,arguments):void 0}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var h=s.match(/^([\w:-]*)\s*(.*)$/),l=h[1]+a.eventNamespace,u=h[2];u?n.delegate(u,l,r):i.bind(l,r)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(i).undelegate(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var n,a,o=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(e.isFunction(o)&&o.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,n,a){"string"==typeof n&&(n={effect:n});var o,r=n?n===!0||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),o=!e.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),o&&e.effects&&e.effects.effect[r]?s[t](n):r!==t&&s[r]?s[r](n.duration,n.easing,a):s.queue(function(i){e(this)[t](),a&&a.call(s[0]),i()})}}),e.widget;var a=!1;e(document).mouseup(function(){a=!1}),e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!a){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,s=1===t.which,n="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return s&&!n&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),a=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),a=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),e.widget("ui.sortable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return e>=t&&t+i>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,i){var s=null,n=!1,a=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,a.widgetName+"-item")===a?(s=e(this),!1):void 0}),e.data(t.target,a.widgetName+"-item")===a&&(s=e(t.target)),s?!this.options.handle||i||(e(this.options.handle,s).find("*").addBack().each(function(){this===t.target&&(n=!0)}),n)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(t,i,s){var n,a,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(a=this.document.find("body"),this.storedCursor=a.css("cursor"),a.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(a)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,s,n,a,o=this.options,r=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-this.document.scrollTop()<o.scrollSensitivity?r=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<o.scrollSensitivity&&(r=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),t.pageX-this.document.scrollLeft()<o.scrollSensitivity?r=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(r=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],a=this._intersectsWithPointer(s),a&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===a?"next":"prev"]()[0]!==n&&!e.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],n):!0)){if(this.direction=1===a?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var s=this,n=this.placeholder.offset(),a=this.options.axis,o={};a&&"x"!==a||(o.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),a&&"y"!==a||(o.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){s._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&s.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!s.length&&t.key&&s.push(t.key+"="),s.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},i.each(function(){s.push(e(t.item||this).attr(t.attribute||"id")||"")}),s},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,a=e.left,o=a+e.width,r=e.top,h=r+e.height,l=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||s+l>r&&h>s+l,c="y"===this.options.axis||t+u>a&&o>t+u,p=d&&c;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:t+this.helperProportions.width/2>a&&o>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),s=t&&i,n=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return s?this.floating?a&&"right"===a||"down"===n?2:1:n&&("down"===n?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),s=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&i||"left"===n&&!i:s&&("down"===s&&t||"up"===s&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function i(){r.push(this)}var s,n,a,o,r=[],h=[],l=this._connectWith();if(l&&t)for(s=l.length-1;s>=0;s--)for(a=e(l[s],this.document[0]),n=a.length-1;n>=0;n--)o=e.data(a[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&h.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(h.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=h.length-1;s>=0;s--)h[s][0].each(i);return e(r)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;t.length>i;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,s,n,a,o,r,h,l,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],c=this._connectWith();if(c&&this.ready)for(i=c.length-1;i>=0;i--)for(n=e(c[i],this.document[0]),s=n.length-1;s>=0;s--)a=e.data(n[s],this.widgetFullName),a&&a!==this&&!a.options.disabled&&(d.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a));for(i=d.length-1;i>=0;i--)for(o=d[i][1],r=d[i][0],s=0,l=r.length;l>s;s++)h=e(r[s]),h.data(this.widgetName+"-item",o),u.push({item:h,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,a;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?e(this.options.toleranceElement,s.item):s.item,t||(s.width=n.outerWidth(),s.height=n.outerHeight()),a=n.offset(),s.left=a.left,s.top=a.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)a=this.containers[i].element.offset(),this.containers[i].containerCache.left=a.left,this.containers[i].containerCache.top=a.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,s=t.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=t.currentItem[0].nodeName.toLowerCase(),n=e("<"+s+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===s?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(n)):"tr"===s?t._createTrPlaceholder(t.currentItem,n):"img"===s&&n.attr("src",t.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(e,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(s.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),s.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,i){var s=this;t.children().each(function(){e("<td>&#160;</td>",s.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(t){var i,s,n,a,o,r,h,l,u,d,c=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!e.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(c&&e.contains(this.containers[i].element[0],c.element[0]))continue;c=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(n=1e4,a=null,u=c.floating||this._isFloating(this.currentItem),o=u?"left":"top",r=u?"width":"height",d=u?"clientX":"clientY",s=this.items.length-1;s>=0;s--)e.contains(this.containers[p].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(h=this.items[s].item.offset()[o],l=!1,t[d]-h>this.items[s][r]/2&&(l=!0),n>Math.abs(t[d]-h)&&(n=Math.abs(t[d]-h),a=this.items[s],this.direction=l?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;a?this._rearrange(t,a,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===n.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===n.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(t=e(n.containment)[0],i=e(n.containment).offset(),s="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])
},_convertPositionTo:function(t,i){i||(i=this.position);var s="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())*s}},_generatePosition:function(t){var i,s,n=this.options,a=t.pageX,o=t.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1],o=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((a-this.originalPageX)/n.grid[0])*n.grid[0],a=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())}},_rearrange:function(e,t,i,s){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(e,t){function i(e,t,i){return function(s){i._trigger(e,s,t._uiHash(t))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)t||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(s=0;n.length>s;s++)n[s].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})});;var HideManyCheckboxes=function(){var settings={},defaults={selectorForHidden:"label.text-checkbox",limits:{desktop:3,tablet:3,mobile:2},tabletViewport:{min:768,max:1024}}
function init(showMore){setSettings($(showMore));hideElements();bindEvents()}
function setSettings($showMore){var options={$showMore:$showMore,limits:$showMore.data('show-limit')};settings=$.extend({},defaults,options)}
function hideElements(){var limit=getLimitByViewport(),index=limit-1,$elements=settings.$showMore.siblings(settings.selectorForHidden);if($elements.length>limit){settings.$showMore.removeClass("hidden");settings.$showMore.siblings(settings.selectorForHidden).filter(":gt('"+index+"')").addClass("hidden")}}
function showElements(){settings.$showMore.siblings(".hidden").removeClass("hidden");settings.$showMore.addClass("hidden")}
function bindEvents(){settings.$showMore.on("click",showElements)}
function getLimitByViewport(){if(document.body.clientWidth<settings.tabletViewport.min){return settings.limits.mobile}else if(document.body.clientWidth<=settings.tabletViewport.max){return settings.limits.tablet}else return settings.limits.desktop};return{init:init}};var ToggleAdditionalGroups=(function(){var $button,$wrapper,$hiddenFieldsets,targetSelector=".group[data-visibility='hidden']",onClass="button2--arrow-up",offClass="button2--arrow-down"
function init(){$button=$("[data-toggle-groups]");$hiddenFieldsets=$(targetSelector);moveButton();bindEvents()}
function moveButton(){if(!$hiddenFieldsets.length)$button.remove();$wrapper=$button.parent();$hiddenFieldsets.first().before($wrapper);$wrapper.show();var text=$button.text();$button.data("text",text)}
function bindEvents(){$button.on("click",function(){$hiddenFieldsets.slideToggle(updateLayout)});if(+window.edit_ad)$button.trigger("click")}
function updateLayout(){var text;if($hiddenFieldsets.first().is(":visible")){text=$button.data("toggled-text");$button.addClass(onClass);$button.removeClass(offClass)}else{text=$button.data("text");$button.addClass(offClass);$button.removeClass(onClass)};$button.text(text)};return{init:init}})();